<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>engineering note - misc</title><link href="https://lupinthe14th.github.io/" rel="alternate"></link><link href="https://lupinthe14th.github.io/feeds/misc.atom.xml" rel="self"></link><id>https://lupinthe14th.github.io/</id><updated>2016-10-15T00:13:00+09:00</updated><entry><title>MVNOのmineoに契約変更</title><link href="https://lupinthe14th.github.io/mvnonomineoniqi-yue-bian-geng.html" rel="alternate"></link><published>2016-10-12T00:00:00+09:00</published><updated>2016-10-15T00:13:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2016-10-12:/mvnonomineoniqi-yue-bian-geng.html</id><summary type="html">iPhone5s（au）と、iPad Air2（au）をmineoに契約変更してみた。</summary><content type="html">&lt;div class="section" id="id1"&gt;
&lt;h2&gt;はじめに&lt;/h2&gt;
&lt;p&gt;iPhone5s（au）の2年縛り契約が切れるので以前iPad Air2をUQ Mobileに変更したのと合
わせて見直ししました。&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mvno"&gt;
&lt;h2&gt;機器前提からMVNO事業者の選択肢&lt;/h2&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;私の iPhone5sはSIM Freeではない古いやつ、かつキャリアは au 。
その為、選択肢は mineo か UQ mobile。&lt;a class="footnote-reference" href="#f1" id="id2"&gt;[1]&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;UQ Mobile はSIMカード一枚毎に契約が必要。いちいちカード情報とか登録するのめん
どい。また複数SIMカードを持っていても残ったパケットをシェアできない。&lt;/li&gt;
&lt;li&gt;mineoは複数契約もすんなり。残ったパケットをシェアすることも可能。&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;div class="section" id="mineo"&gt;
&lt;h2&gt;mineoに変更&lt;/h2&gt;
&lt;p&gt;iPad Air2 はほとんど持ち歩かず、自宅内ではWi-Fi通信なので、消費パケットがほとん
どない状態。でも持ち歩くときには単独で通信できるようにしたかった。&lt;/p&gt;
&lt;p&gt;UQ Mobileはデータ転送速度が魅力的ではあったけど、今回の主眼は月々の通信費の最適
化なので残ったパケットを別のSIMカードでも使えるパケットシェアのサービスが魅力的
だったのでmineoに変更。&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="sim"&gt;
&lt;h2&gt;SIMカードの種類&lt;/h2&gt;
&lt;p&gt;iPhone5sではほとんど電話しないのでガラケーとの２台持ちにしてiPhone5sはデータ
SIM（SMS付き）を契約します。&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;契約変更の流れ&lt;/h2&gt;
&lt;ol class="arabic"&gt;
&lt;li&gt;&lt;p class="first"&gt;アマゾンでエントリーパックを購入&lt;/p&gt;
&lt;p&gt;配送料・手数料込みで￥ 1,259-&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;エントリーパックの郵送待ち&lt;/p&gt;
&lt;p&gt;注文して３日ほどで届きました。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;エントリーパックが届いたら記載のキーコードを使ってmineoのウェブ申し込みサイト
でSIMカードを契約&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;SIMカードが届いたらiPhone5sに挿して動作確認&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;使えそうだと分かったので、ガラケー白ロム購入&lt;/p&gt;
&lt;p&gt;今回購入したのは &lt;a class="reference external" href="https://www.amazon.co.jp/dp/B006QHNRME"&gt;E10K ブラック 携帯電話 白ロム au&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;配送料・手数料込みで￥ 5,580-&lt;/p&gt;
&lt;p&gt;この時、まとめて充電器と卓上ホルダーを注文すればよかったのですが古いの探して
からまた購入すりゃいいと判断して、携帯電話だけ購入。
この判断は失敗でした。ちょっと探してないのがわかったらすぐポチッちゃいまし
た。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;mineoの動作確認が終わったら、iphone5sは元のauのSIMカードに戻して使う&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;購入したガラケー白ロムが届いたらauショップに行って持ち込み機種変更をお願いする&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;機種変更中にiPhone5sのSIMカードをmineoのに変更。
mineoのSIMカードを使うにはプロファイルを変えなきゃいけないのでインターネットに
繋がる事が出来るギリギリにプロファイルをダウンロードして変更する。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;機種変更終わったら晴れて二台持ち。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;続けてiPad Air2用のもアマゾンでエントリーパックを購入&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;エントリーパックの郵送待ち&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;エントリーパックが届いたら記載のキーコードを使ってmineoのマイページから追加SIM
カードを契約&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;SIMカードが届いたらiPad Air2に挿して動作確認&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p class="first"&gt;使えそうだと分かったら、UQ mobileには電話で契約解除を連絡&lt;/p&gt;
&lt;p&gt;契約解除する理由を聞かれましたので、自分のプランに最適な他事業者があるのでそ
こに変更するんだと連絡。すんなり契約解除できました。&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;備考&lt;/p&gt;
&lt;p class="last"&gt;UQ mobileの速さは魅力的なのであとはパケットシェアが出来ればUQ mobileに乗り換
えるかもしれない。&lt;/p&gt;
&lt;/div&gt;
&lt;iframe
src="https://rcm-fe.amazon-adsystem.com/e/cm?t=lupinthe14t05-22&amp;o=9&amp;p=8&amp;l=as1&amp;asins=B00UT26M0Q&amp;ref=tf_til&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;m=amazon&amp;lc1=0000FF&amp;bc1=000000&amp;bg1=FFFFFF&amp;f=ifr"
style="width:120px;height:240px;" scrolling="no" marginwidth="0"
marginheight="0" frameborder="0"&gt;&lt;/iframe&gt;
&lt;iframe
src="https://rcm-fe.amazon-adsystem.com/e/cm?t=lupinthe14t05-22&amp;o=9&amp;p=8&amp;l=as1&amp;asins=B006QHNRME&amp;ref=tf_til&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;m=amazon&amp;lc1=0000FF&amp;bc1=000000&amp;bg1=FFFFFF&amp;f=ifr"
style="width:120px;height:240px;" scrolling="no" marginwidth="0"
marginheight="0" frameborder="0"&gt;&lt;/iframe&gt;
&lt;iframe
src="https://rcm-fe.amazon-adsystem.com/e/cm?t=lupinthe14t05-22&amp;o=9&amp;p=8&amp;l=as1&amp;asins=B001EYTGDS&amp;ref=tf_til&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;m=amazon&amp;lc1=0000FF&amp;bc1=000000&amp;bg1=FFFFFF&amp;f=ifr"
style="width:120px;height:240px;" scrolling="no" marginwidth="0"
marginheight="0" frameborder="0"&gt;&lt;/iframe&gt;
&lt;iframe
src="https://rcm-fe.amazon-adsystem.com/e/cm?t=lupinthe14t05-22&amp;o=9&amp;p=8&amp;l=as1&amp;asins=B0044KJIY6&amp;ref=tf_til&amp;fc1=000000&amp;IS2=1&amp;lt1=_blank&amp;m=amazon&amp;lc1=0000FF&amp;bc1=000000&amp;bg1=FFFFFF&amp;f=ifr"
style="width:120px;height:240px;" scrolling="no" marginwidth="0"
marginheight="0" frameborder="0"&gt;&lt;/iframe&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p class="rubric"&gt;Footnotes&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="f1" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;IIJとかもauのSIMカードの取り扱いを始めましたが、SIMロック解除ができない
古いiPhoneとかでは利用できないので。&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</content><category term="mineo"></category><category term="MVNO"></category><category term="au"></category><category term="iPad Air2"></category><category term="iOS 9.3.5"></category><category term="iOS10.0.2"></category><category term="iPhone5s"></category><category term="データSIM"></category><category term="SMS"></category><category term="白ロム"></category><category term="E10K"></category></entry><entry><title>UQ mobile で MVNO デビュー</title><link href="https://lupinthe14th.github.io/uq-mobile-de-mvno-debiyu.html" rel="alternate"></link><published>2016-02-09T00:00:00+09:00</published><updated>2016-02-09T00:00:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2016-02-09:/uq-mobile-de-mvno-debiyu.html</id><summary type="html">iPad Air2 (au版) を UQ mobile で MVNO デビュー</summary><content type="html">&lt;div class="section" id="id1"&gt;
&lt;h2&gt;はじめに&lt;/h2&gt;
&lt;p&gt;データー通信しかしない iPad2 Air2 の２年縛り契約が切れるので契約してみました。&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="mvno"&gt;
&lt;h2&gt;機器前提からMVNO事業者の選択肢&lt;/h2&gt;
&lt;p&gt;私の iPad Air2 は SIM Free ではない古いやつ、かつキャリアは au 。
その為、選択肢は mineo か UQ mobile。&lt;a class="footnote-reference" href="#f1" id="id2"&gt;[1]&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="uq-mobile"&gt;
&lt;h2&gt;UQ mobile にしてみました&lt;/h2&gt;
&lt;p&gt;UQmobile は、元KDDIバリューイネイブラーとかとのことなので、UQ mobile かな〜と思
い、オフィシャルサイトを開いたら、サポートセンターにチャットで問い合わせられるの
で、問い合わせたところ、疑問点がサクサク解消。そのサイトですぐに契約出来るし、
mineo と比べて回線速度は　UQmobile が良いとのことなので、そのまま契約しちゃいま
した。それが一昨日の2/6。今日帰宅したら既に自宅に配送されていました。&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h2&gt;早速試してみます&lt;/h2&gt;
&lt;p&gt;で、早速 SIM を交換して、プロファイルのインストール。
プロファイルは、UQ mobile 公式では私の iPad Air2 は、iOS 9.2.1 では動かないので
すが、非公式のプロファイル &lt;a class="footnote-reference" href="#f2" id="id4"&gt;[2]&lt;/a&gt; で動作するとのことなので試したらあっさり4Gひろ
ってくれました。&lt;/p&gt;
&lt;p&gt;デザリングはできないのですが、ほぼ使わないので問題なし。
これで、iPad 分は月額¥980-に。&lt;a class="footnote-reference" href="#f3" id="id5"&gt;[3]&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;てか、最近は、外でも滅多に使わないので、Wifi専用でもよかったんですがね……。&lt;/p&gt;
&lt;p class="rubric"&gt;Footnotes&lt;/p&gt;
&lt;table class="docutils footnote" frame="void" id="f1" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id2"&gt;[1]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;ざっくりしか調べていないので他にも選択肢があるのかも知れません&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="f2" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id4"&gt;[2]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a class="reference external" href="http://blogram.net/2015/07/13/mobileconfig/"&gt;iOS端末でKDDI系MVNOが利用可能になるAPN構成プロファイルの公開&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table class="docutils footnote" frame="void" id="f3" rules="none"&gt;
&lt;colgroup&gt;&lt;col class="label" /&gt;&lt;col /&gt;&lt;/colgroup&gt;
&lt;tbody valign="top"&gt;
&lt;tr&gt;&lt;td class="label"&gt;&lt;a class="fn-backref" href="#id5"&gt;[3]&lt;/a&gt;&lt;/td&gt;&lt;td&gt;データ高速プランの場合。データ無制限プランもあり、後で変更も手数料等発
生しないとのことでした。&lt;/td&gt;&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
</content><category term="UQ mobile"></category><category term="MVNO"></category><category term="au"></category><category term="iPad Air2"></category><category term="iOS 9.2.1"></category></entry><entry><title>nghttpd HTTP/2 お試し</title><link href="https://lupinthe14th.github.io/nghttpd-http2.html" rel="alternate"></link><published>2015-12-17T10:30:00+09:00</published><updated>2015-12-17T11:00:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2015-12-17:/nghttpd-http2.html</id><summary type="html">&lt;p&gt;C言語のHTTP/2 server の実装の一つ、 nghttpd を試しに構築してベンチマークを取得してみる。&lt;/p&gt;</summary><content type="html">&lt;p&gt;この記事は、&lt;a href="http://qiita.com/advent-calendar/2015/http2"&gt;http2 Advent Calendar 2015&lt;/a&gt;
の17日目の記事です。&lt;/p&gt;
&lt;h1 id="_1"&gt;目次&lt;/h1&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;目次&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;はじめに&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;お試し内容&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_4"&gt;機器情報&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#nghttpd"&gt;nghttpd サーバー&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;負荷発生元クライアント&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#switching-hub"&gt;SWITCHING-HUB&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#nghttpd_1"&gt;nghttpd 実行環境の構築&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_6"&gt;前提パッケージのインストール&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#nghttpd_2"&gt;nghttpd の設定&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_7"&gt;ベンチマークの取得&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#nginx"&gt;nginx との比較用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_8"&gt;大量画像表示での比較&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_9"&gt;考察&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#nginx_1"&gt;nginx と比較用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_10"&gt;大量画像表示での比較&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_11"&gt;まとめ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_12"&gt;参考資料&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h1 id="_2"&gt;はじめに&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;nginx&lt;/code&gt; 、 &lt;code&gt;H2O&lt;/code&gt; それぞれの HTTP/1.1 と HTTP/2 でのベンチマークを取得した。その
ベンチマークの取得に利用したツール &lt;code&gt;h2load&lt;/code&gt; は、HTTP/2 の C 言語の実装例である
&lt;code&gt;nghttp2&lt;/code&gt; のライブラリの一つ。&lt;/p&gt;
&lt;p&gt;このライブラリには、HTTP/2 server の、&lt;code&gt;nghttpd&lt;/code&gt; もあるので、これの HTTP/2 のベン
チマークを取得する。&lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;h1 id="_3"&gt;お試し内容&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nghttpd&lt;/code&gt; 実行環境を Hyper-V 2012 R2 上の仮想サーバー（Ubuntu 14.04） に構築する&lt;/li&gt;
&lt;li&gt;&lt;code&gt;h2load&lt;/code&gt; を用いてベンチマークを取得する&lt;/li&gt;
&lt;li&gt;&lt;code&gt;h2load&lt;/code&gt; 実行クライアント（以後、負荷発生元クライアントと表記）は、同セグメント
  で別筐体上のHyper-V 2012 R2 上の仮想サーバーに構築した lubuntu を用いる&lt;/li&gt;
&lt;li&gt;SWITHING-HUB は、 1GBits/sec 規格&lt;/li&gt;
&lt;li&gt;HTTP/2 で、 &lt;code&gt;nginx&lt;/code&gt; のデフォルト &lt;code&gt;index.html&lt;/code&gt; と、大量画像ファイル表示用 HTML
  でのベンチマークを取得する&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_4"&gt;機器情報&lt;/h2&gt;
&lt;p&gt;測定の際に利用する機器は以下の通り。&lt;/p&gt;
&lt;h3 id="nghttpd"&gt;nghttpd サーバー&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア: &lt;a href="https://www.systemworks.co.jp/pms_s403x.php"&gt;Systemworks Server S4032&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ハイパバイザー: Hyper-V 2012 R2&lt;/li&gt;
&lt;li&gt;OS: Ubuntu&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;proc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cpuinfo&lt;/span&gt;
&lt;span class="n"&gt;processor&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vendor_id&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;GenuineIntel&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;family&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Celeron&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;G1820&lt;/span&gt; &lt;span class="o"&gt;@&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="n"&gt;GHz&lt;/span&gt;
&lt;span class="n"&gt;stepping&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;microcode&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;xffffffff&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;MHz&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2677&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;835&lt;/span&gt;
&lt;span class="k"&gt;cache&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="n"&gt;KB&lt;/span&gt;
&lt;span class="n"&gt;physical&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;siblings&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;core&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;cores&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;apicid&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;initial&lt;/span&gt; &lt;span class="n"&gt;apicid&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;fpu&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;fpu_exception&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;cpuid&lt;/span&gt; &lt;span class="k"&gt;level&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;
&lt;span class="n"&gt;wp&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;flags&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fpu&lt;/span&gt; &lt;span class="n"&gt;vme&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;pse&lt;/span&gt; &lt;span class="n"&gt;tsc&lt;/span&gt; &lt;span class="n"&gt;msr&lt;/span&gt; &lt;span class="n"&gt;pae&lt;/span&gt; &lt;span class="n"&gt;mce&lt;/span&gt; &lt;span class="n"&gt;cx8&lt;/span&gt; &lt;span class="n"&gt;apic&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt; &lt;span class="n"&gt;mtrr&lt;/span&gt; &lt;span class="n"&gt;pge&lt;/span&gt; &lt;span class="n"&gt;mca&lt;/span&gt; &lt;span class="n"&gt;cmov&lt;/span&gt;
&lt;span class="n"&gt;pat&lt;/span&gt; &lt;span class="n"&gt;pse36&lt;/span&gt; &lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="n"&gt;mmx&lt;/span&gt; &lt;span class="n"&gt;fxsr&lt;/span&gt; &lt;span class="n"&gt;sse&lt;/span&gt; &lt;span class="n"&gt;sse2&lt;/span&gt; &lt;span class="n"&gt;ss&lt;/span&gt; &lt;span class="n"&gt;syscall&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt; &lt;span class="n"&gt;lm&lt;/span&gt; &lt;span class="n"&gt;constant_tsc&lt;/span&gt; &lt;span class="n"&gt;rep_good&lt;/span&gt;
&lt;span class="n"&gt;nopl&lt;/span&gt; &lt;span class="n"&gt;eagerfpu&lt;/span&gt; &lt;span class="n"&gt;pni&lt;/span&gt; &lt;span class="n"&gt;pclmulqdq&lt;/span&gt; &lt;span class="n"&gt;ssse3&lt;/span&gt; &lt;span class="n"&gt;cx16&lt;/span&gt; &lt;span class="n"&gt;sse4_1&lt;/span&gt; &lt;span class="n"&gt;sse4_2&lt;/span&gt; &lt;span class="n"&gt;movbe&lt;/span&gt; &lt;span class="n"&gt;popcnt&lt;/span&gt; &lt;span class="n"&gt;xsave&lt;/span&gt;
&lt;span class="n"&gt;rdrand&lt;/span&gt; &lt;span class="n"&gt;hypervisor&lt;/span&gt; &lt;span class="n"&gt;lahf_lm&lt;/span&gt; &lt;span class="n"&gt;abm&lt;/span&gt; &lt;span class="n"&gt;xsaveopt&lt;/span&gt; &lt;span class="n"&gt;fsgsbase&lt;/span&gt; &lt;span class="n"&gt;erms&lt;/span&gt;
&lt;span class="n"&gt;bogomips&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5355&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt;
&lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;cache_alignment&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;sizes&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;39&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;physical&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;virtual&lt;/span&gt;
&lt;span class="n"&gt;power&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;free&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
             &lt;span class="n"&gt;total&lt;/span&gt;       &lt;span class="n"&gt;used&lt;/span&gt;       &lt;span class="k"&gt;free&lt;/span&gt;     &lt;span class="n"&gt;shared&lt;/span&gt;    &lt;span class="n"&gt;buffers&lt;/span&gt;     &lt;span class="n"&gt;cached&lt;/span&gt;
&lt;span class="n"&gt;Mem&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;          &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;       &lt;span class="mi"&gt;689&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;660&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="o"&gt;-/+&lt;/span&gt; &lt;span class="n"&gt;buffers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;       &lt;span class="mi"&gt;526&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;span class="n"&gt;Swap&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;       &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;arch&lt;/span&gt;
&lt;span class="n"&gt;x86_64&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Ubuntu&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_RELEASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_CODENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;trusty&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_DESCRIPTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Ubuntu 14.04.3 LTS&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_5"&gt;負荷発生元クライアント&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア: &lt;a href="http://www.systemworks.co.jp/pms_s977x.php"&gt;Systemworks Server S9772&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ハイパバイザー: Hyper-V 2012 R2&lt;/li&gt;
&lt;li&gt;OS: lubuntu&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;proc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cpuinfo&lt;/span&gt;
&lt;span class="n"&gt;processor&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vendor_id&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;GenuineIntel&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;family&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;62&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Xeon&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;E5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2420&lt;/span&gt; &lt;span class="n"&gt;v2&lt;/span&gt; &lt;span class="o"&gt;@&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="n"&gt;GHz&lt;/span&gt;
&lt;span class="n"&gt;stepping&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
&lt;span class="n"&gt;microcode&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;xffffffff&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;MHz&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2170&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;472&lt;/span&gt;
&lt;span class="k"&gt;cache&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15360&lt;/span&gt; &lt;span class="n"&gt;KB&lt;/span&gt;
&lt;span class="n"&gt;physical&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;siblings&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;core&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;cores&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;apicid&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;initial&lt;/span&gt; &lt;span class="n"&gt;apicid&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;fpu&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;fpu_exception&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;cpuid&lt;/span&gt; &lt;span class="k"&gt;level&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;
&lt;span class="n"&gt;wp&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;flags&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fpu&lt;/span&gt; &lt;span class="n"&gt;vme&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;pse&lt;/span&gt; &lt;span class="n"&gt;tsc&lt;/span&gt; &lt;span class="n"&gt;msr&lt;/span&gt; &lt;span class="n"&gt;pae&lt;/span&gt; &lt;span class="n"&gt;mce&lt;/span&gt; &lt;span class="n"&gt;cx8&lt;/span&gt; &lt;span class="n"&gt;apic&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt; &lt;span class="n"&gt;mtrr&lt;/span&gt; &lt;span class="n"&gt;pge&lt;/span&gt; &lt;span class="n"&gt;mca&lt;/span&gt; &lt;span class="n"&gt;cmov&lt;/span&gt;
&lt;span class="n"&gt;pat&lt;/span&gt; &lt;span class="n"&gt;pse36&lt;/span&gt; &lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="n"&gt;mmx&lt;/span&gt; &lt;span class="n"&gt;fxsr&lt;/span&gt; &lt;span class="n"&gt;sse&lt;/span&gt; &lt;span class="n"&gt;sse2&lt;/span&gt; &lt;span class="n"&gt;ss&lt;/span&gt; &lt;span class="n"&gt;syscall&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt; &lt;span class="n"&gt;lm&lt;/span&gt; &lt;span class="n"&gt;constant_tsc&lt;/span&gt; &lt;span class="n"&gt;rep_good&lt;/span&gt;
&lt;span class="n"&gt;nopl&lt;/span&gt; &lt;span class="n"&gt;eagerfpu&lt;/span&gt; &lt;span class="n"&gt;pni&lt;/span&gt; &lt;span class="n"&gt;pclmulqdq&lt;/span&gt; &lt;span class="n"&gt;ssse3&lt;/span&gt; &lt;span class="n"&gt;cx16&lt;/span&gt; &lt;span class="n"&gt;sse4_1&lt;/span&gt; &lt;span class="n"&gt;sse4_2&lt;/span&gt; &lt;span class="n"&gt;popcnt&lt;/span&gt; &lt;span class="n"&gt;aes&lt;/span&gt; &lt;span class="n"&gt;xsave&lt;/span&gt; &lt;span class="n"&gt;avx&lt;/span&gt;
&lt;span class="n"&gt;f16c&lt;/span&gt; &lt;span class="n"&gt;rdrand&lt;/span&gt; &lt;span class="n"&gt;hypervisor&lt;/span&gt; &lt;span class="n"&gt;lahf_lm&lt;/span&gt; &lt;span class="n"&gt;fsgsbase&lt;/span&gt; &lt;span class="n"&gt;smep&lt;/span&gt; &lt;span class="n"&gt;erms&lt;/span&gt; &lt;span class="n"&gt;xsaveopt&lt;/span&gt;
&lt;span class="n"&gt;bugs&lt;/span&gt;        &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;bogomips&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4340&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;
&lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;cache_alignment&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;sizes&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;physical&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;virtual&lt;/span&gt;
&lt;span class="n"&gt;power&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;free&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
             &lt;span class="n"&gt;total&lt;/span&gt;       &lt;span class="n"&gt;used&lt;/span&gt;       &lt;span class="k"&gt;free&lt;/span&gt;     &lt;span class="n"&gt;shared&lt;/span&gt;    &lt;span class="n"&gt;buffers&lt;/span&gt;     &lt;span class="n"&gt;cached&lt;/span&gt;
&lt;span class="n"&gt;Mem&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;          &lt;span class="mi"&gt;982&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;287&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;694&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;        &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="o"&gt;-/+&lt;/span&gt; &lt;span class="n"&gt;buffers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;       &lt;span class="mi"&gt;147&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;834&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="n"&gt;Swap&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;arch&lt;/span&gt;
&lt;span class="n"&gt;x86_64&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Ubuntu&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_RELEASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_CODENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;vivid&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_DESCRIPTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Ubuntu 15.04&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="switching-hub"&gt;SWITCHING-HUB&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア情報: &lt;a href="http://corega.jp/prod/sw16gtxlp/index.htm"&gt;コレガ CG-SW16GTXLP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="nghttpd_1"&gt;nghttpd 実行環境の構築&lt;/h1&gt;
&lt;h2 id="_6"&gt;前提パッケージのインストール&lt;/h2&gt;
&lt;p&gt;ソースからビルドする為の前提パッケージをインストールする。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get install g++ make binutils autoconf automake autotools-dev &lt;span class="se"&gt;\&lt;/span&gt;
                       libtool pkg-config zlib1g-dev libcunit1-dev &lt;span class="se"&gt;\&lt;/span&gt;
                       libssl-dev libxml2-dev libev-dev libevent-dev &lt;span class="se"&gt;\&lt;/span&gt;
                       libjansson-dev libjemalloc-dev cython python3-dev &lt;span class="se"&gt;\&lt;/span&gt;
                       python-setuptools
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ソースをダウンロードしてビルドおよびインストールを行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/src
&lt;span class="gp"&gt;$&lt;/span&gt; sudo git clone https://github.com/tatsuhiro-t/nghttp2.git
&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; nghttp2/
&lt;span class="gp"&gt;$&lt;/span&gt; sudo autoreconf -i
&lt;span class="gp"&gt;$&lt;/span&gt; sudo automake
&lt;span class="gp"&gt;$&lt;/span&gt; sudo autoconf
&lt;span class="gp"&gt;$&lt;/span&gt; sudo ./configure
&lt;span class="gp"&gt;$&lt;/span&gt; sudo make
&lt;span class="gp"&gt;$&lt;/span&gt; sudo make install
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;nghttpd&lt;/code&gt; コマンドが実行可能か確認する。
以下の様にコマンドを実行し、&lt;code&gt;nghttpd&lt;/code&gt; コマンドのヘルプが表示されることを確認する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; &lt;span class="nv"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/lib&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nb"&gt;export&lt;/span&gt; LD_LIBRARY_PATH
&lt;span class="gp"&gt;$&lt;/span&gt; nghttpd --help
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="nghttpd_2"&gt;nghttpd の設定&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;nghttpd&lt;/code&gt; の設定について以下に記載する。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ディレクトリの作成&lt;/p&gt;
&lt;p&gt;ドキュメントルートおよび証明書ファイルの格納ディレクトリを作成する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nghttpd&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nghttpd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自己署名証明書の作成&lt;/p&gt;
&lt;p&gt;OpenSSL コマンドにて自己署名証明書を作成する。&lt;/p&gt;
&lt;p&gt;途中、証明書要求ファイルを作成する際に入力を求められるが、FQDN のみ適切な値
を入力する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nghttpd&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;genrsa&lt;/span&gt; &lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;  &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;csr&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;x509&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="mi"&gt;3650&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;req&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signkey&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;csr&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Supervisor のインストールおよび設定&lt;/p&gt;
&lt;p&gt;Supervisor のインストールを行い、nghttpd を登録して自動起動および起動停止を楽に
出来る様にする。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;apt-get&lt;/code&gt; にて Supervisor のインストールを行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;supervisor&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;/etc/supervisor/conf.d/nghttpd.conf&lt;/code&gt; の編集を行い Supervisor に、 &lt;code&gt;nghttpd&lt;/code&gt;
の設定を行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[program:nghttpd]&lt;/span&gt;
&lt;span class="na"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/local/bin/nghttpd -m 1024 -d /var/www/nghttpd/ 443 /usr/local/etc/nghttpd/cert.key /usr/local/etc/nghttpd/cert.pem&lt;/span&gt;
&lt;span class="na"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="na"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="na"&gt;environment&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;LD_LIBRARY_PATH=&amp;quot;/usr/local/lib&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Supervisor の再起動&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;supervisor&lt;/span&gt; &lt;span class="k"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;nghttpd&lt;/code&gt; の起動&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;supervisorctl&lt;/span&gt; &lt;span class="k"&gt;start&lt;/span&gt; &lt;span class="n"&gt;nghttpd&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;nginx デフォルト index.html の取得&lt;/p&gt;
&lt;p&gt;nginx サーバーから、 &lt;code&gt;wget&lt;/code&gt; で &lt;code&gt;index.html&lt;/code&gt; を取得する。&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;nginx.localdomain&lt;/dt&gt;
&lt;dd&gt;nginx サーバーのFQDN&lt;/dd&gt;
&lt;/dl&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nghttpd&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;localdomain&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="c1"&gt;--no-check-certificate&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;大量画像表示サイトの構築&lt;/p&gt;
&lt;p&gt;大量の画像を表示するサイトを以下の方法で作成する。&lt;/p&gt;
&lt;p&gt;テスト画像を、&lt;a href="http://www.vision.caltech.edu/Image_Datasets/Caltech101/101_ObjectCategories.tar.gz"&gt;Caltech 101&lt;/a&gt;
からダウンロードして、解凍する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nghttpd&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vision&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;caltech&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;edu&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Image_Datasets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Caltech101&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;101&lt;/span&gt;&lt;span class="n"&gt;_ObjectCategories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;xfz&lt;/span&gt; &lt;span class="mi"&gt;101&lt;/span&gt;&lt;span class="n"&gt;_ObjectCategories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;画像数: 9144
容量: 151MByte&lt;/p&gt;
&lt;p&gt;img.html (513KBytes) を以下の様に作成する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;HTTP2 TEST&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0001.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0002.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0003.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0004.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0005.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
・
・
・
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0053.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0054.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0055.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0056.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0057.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0058.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0059.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0060.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_7"&gt;ベンチマークの取得&lt;/h2&gt;
&lt;p&gt;試験内容と得られたベンチマーク値をそれぞれ記載する。&lt;/p&gt;
&lt;h3 id="nginx"&gt;nginx との比較用&lt;/h3&gt;
&lt;p&gt;後で nginx の結果と比較するので、同じ index.html (612bytes) を用いてベンチマークを
取得する。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;リクエストコマンドの決定&lt;/p&gt;
&lt;p&gt;nginx で使用したリクエスト数を生成するコマンドにて実行する。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;コマンド&lt;/p&gt;
&lt;p&gt;h2load -n 100000 -c 50 -m 50 &lt;a href="https://www.example.com/"&gt;https://www.example.com/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;h2load オプション説明&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;-n&lt;/dt&gt;
&lt;dd&gt;総リクエスト数&lt;/dd&gt;
&lt;dt&gt;-c&lt;/dt&gt;
&lt;dd&gt;クライアント数&lt;/dd&gt;
&lt;dt&gt;-m&lt;/dt&gt;
&lt;dd&gt;クライアント当たりの、最大ストリーム並列数&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ベンチマーク&lt;/p&gt;
&lt;p&gt;&lt;code&gt;h2load&lt;/code&gt; 実行結果は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;www&lt;/span&gt;.&lt;span class="nv"&gt;example&lt;/span&gt;.&lt;span class="nv"&gt;com&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;h2&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;62&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;61841&lt;/span&gt;.&lt;span class="mi"&gt;20&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;37&lt;/span&gt;.&lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;64106550&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;1105350&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;93&lt;/span&gt;.&lt;span class="mi"&gt;82&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;61200000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:    &lt;span class="mi"&gt;12&lt;/span&gt;.&lt;span class="mi"&gt;82&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;97&lt;/span&gt;.&lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;33&lt;/span&gt;.&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;      &lt;span class="mi"&gt;9&lt;/span&gt;.&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;89&lt;/span&gt;.&lt;span class="mi"&gt;78&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:   &lt;span class="mi"&gt;240&lt;/span&gt;.&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;282&lt;/span&gt;.&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;259&lt;/span&gt;.&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;12&lt;/span&gt;.&lt;span class="mi"&gt;82&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;54&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:   &lt;span class="mi"&gt;283&lt;/span&gt;.&lt;span class="mi"&gt;93&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;336&lt;/span&gt;.&lt;span class="mi"&gt;99&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;309&lt;/span&gt;.&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;15&lt;/span&gt;.&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;56&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :    &lt;span class="mi"&gt;1237&lt;/span&gt;.&lt;span class="mi"&gt;36&lt;/span&gt;     &lt;span class="mi"&gt;1255&lt;/span&gt;.&lt;span class="mi"&gt;62&lt;/span&gt;     &lt;span class="mi"&gt;1244&lt;/span&gt;.&lt;span class="mi"&gt;26&lt;/span&gt;        &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;76&lt;/span&gt;    &lt;span class="mi"&gt;66&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_8"&gt;大量画像表示での比較&lt;/h3&gt;
&lt;p&gt;大量に画像を表示する img.html (513Kbytes) を用いてベンチマークを取得する。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;リクエストコマンドの決定&lt;/p&gt;
&lt;p&gt;クライアント数 = クライアント当たりの、最大ストリーム並列数 = 1021 から
&lt;code&gt;client could not connect to host&lt;/code&gt; が出始める &lt;sup id="fnref:2"&gt;&lt;a class="footnote-ref" href="#fn:2"&gt;2&lt;/a&gt;&lt;/sup&gt; ので、
コマンドは以下を用いる。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;コマンド&lt;/p&gt;
&lt;p&gt;h2load -n 100000 -c 1020 -m 1020 &lt;a href="https://www.example.com/img.html"&gt;https://www.example.com/img.html&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;h2load オプション説明&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;-n&lt;/dt&gt;
&lt;dd&gt;総リクエスト数&lt;/dd&gt;
&lt;dt&gt;-c&lt;/dt&gt;
&lt;dd&gt;クライアント数&lt;/dd&gt;
&lt;dt&gt;-m&lt;/dt&gt;
&lt;dd&gt;クライアント当たりの、最大ストリーム並列数&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ベンチマーク&lt;/p&gt;
&lt;p&gt;&lt;code&gt;h2load&lt;/code&gt; 実行結果は以下の通り。なお、 &lt;code&gt;H2O&lt;/code&gt; の場合のベンチマークは、5秒毎に3
回実行し、3回とも全てのリクエストが成功していた為、3回目の実行結果を採用し
ていたが、 &lt;code&gt;nghttpd&lt;/code&gt; では2回目3回目は HTTP4xx エラーが発生。&lt;/p&gt;
&lt;p&gt;そこで実行結果は以下に全て記載する。&lt;/p&gt;
&lt;p&gt;1回目&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;www&lt;/span&gt;.&lt;span class="nv"&gt;example&lt;/span&gt;.&lt;span class="nv"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;img&lt;/span&gt;.&lt;span class="nv"&gt;html&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;h2&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;450&lt;/span&gt;.&lt;span class="mi"&gt;73&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;221&lt;/span&gt;.&lt;span class="mi"&gt;86&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;111&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;52562510160&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;1485680&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;91&lt;/span&gt;.&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;52530400000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:     &lt;span class="mi"&gt;56&lt;/span&gt;.&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;446&lt;/span&gt;.&lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;429&lt;/span&gt;.&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;      &lt;span class="mi"&gt;34&lt;/span&gt;.&lt;span class="mi"&gt;98&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;98&lt;/span&gt;.&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:   &lt;span class="mi"&gt;561&lt;/span&gt;.&lt;span class="mi"&gt;03&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;393&lt;/span&gt;.&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;5&lt;/span&gt;.&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;      &lt;span class="mi"&gt;34&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;99&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:      &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;394&lt;/span&gt;.&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;5&lt;/span&gt;.&lt;span class="mi"&gt;89&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;      &lt;span class="mi"&gt;34&lt;/span&gt;.&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;99&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :       &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;26&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;23&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;01&lt;/span&gt;    &lt;span class="mi"&gt;76&lt;/span&gt;.&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;2回目&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;h2&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;72&lt;/span&gt;.&lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;1381&lt;/span&gt;.&lt;span class="mi"&gt;70&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;106&lt;/span&gt;.&lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;15386&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;84614&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;15386&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;84614&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;8101811032&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;620554&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;94&lt;/span&gt;.&lt;span class="mi"&gt;87&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;8094934830&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:   &lt;span class="mi"&gt;220&lt;/span&gt;.&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;      &lt;span class="mi"&gt;69&lt;/span&gt;.&lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;      &lt;span class="mi"&gt;11&lt;/span&gt;.&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;      &lt;span class="mi"&gt;24&lt;/span&gt;.&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;84&lt;/span&gt;.&lt;span class="mi"&gt;61&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:      &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;41&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;71&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;209&lt;/span&gt;.&lt;span class="mi"&gt;69&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;61&lt;/span&gt;.&lt;span class="mi"&gt;67&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:      &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;87&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;55&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;178&lt;/span&gt;.&lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;60&lt;/span&gt;.&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :       &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;35&lt;/span&gt;       &lt;span class="mi"&gt;34&lt;/span&gt;.&lt;span class="mi"&gt;17&lt;/span&gt;       &lt;span class="mi"&gt;26&lt;/span&gt;.&lt;span class="mi"&gt;35&lt;/span&gt;       &lt;span class="mi"&gt;10&lt;/span&gt;.&lt;span class="mi"&gt;77&lt;/span&gt;    &lt;span class="mi"&gt;84&lt;/span&gt;.&lt;span class="mi"&gt;61&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3回目&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;h2&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;250&lt;/span&gt;.&lt;span class="mi"&gt;96&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;398&lt;/span&gt;.&lt;span class="mi"&gt;47&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;110&lt;/span&gt;.&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;55272&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;44728&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;55272&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;44728&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;29060038344&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;1028368&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;93&lt;/span&gt;.&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;29041267160&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:   &lt;span class="mi"&gt;388&lt;/span&gt;.&lt;span class="mi"&gt;56&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;248&lt;/span&gt;.&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;132&lt;/span&gt;.&lt;span class="mi"&gt;46&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;118&lt;/span&gt;.&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;55&lt;/span&gt;.&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:      &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;52&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;72&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;186&lt;/span&gt;.&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;68&lt;/span&gt;.&lt;span class="mi"&gt;63&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:      &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;75&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;68&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;134&lt;/span&gt;.&lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;66&lt;/span&gt;.&lt;span class="mi"&gt;57&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :       &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;39&lt;/span&gt;       &lt;span class="mi"&gt;35&lt;/span&gt;.&lt;span class="mi"&gt;69&lt;/span&gt;       &lt;span class="mi"&gt;14&lt;/span&gt;.&lt;span class="mi"&gt;20&lt;/span&gt;       &lt;span class="mi"&gt;15&lt;/span&gt;.&lt;span class="mi"&gt;37&lt;/span&gt;    &lt;span class="mi"&gt;57&lt;/span&gt;.&lt;span class="mi"&gt;94&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id="_9"&gt;考察&lt;/h1&gt;
&lt;h2 id="nginx_1"&gt;nginx と比較用&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;nginx&lt;/code&gt; との比較用でのベンチマークは、以下の表の通り。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Time (sec)&lt;/th&gt;
&lt;th&gt;Requests/sec&lt;/th&gt;
&lt;th&gt;succeeded/Requests&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1.62&lt;/td&gt;
&lt;td&gt;61841.20&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_10"&gt;大量画像表示での比較&lt;/h2&gt;
&lt;p&gt;大量画像表示でのベンチマークは、計測回毎に以下の表の通り。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;計測回&lt;/th&gt;
&lt;th&gt;Time (sec)&lt;/th&gt;
&lt;th&gt;Requests/sec&lt;/th&gt;
&lt;th&gt;succeeded/Requests&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;td&gt;450.73&lt;/td&gt;
&lt;td&gt;221.86&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;72.37&lt;/td&gt;
&lt;td&gt;1381.70&lt;/td&gt;
&lt;td&gt;0.15386&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;250.96&lt;/td&gt;
&lt;td&gt;398.47&lt;/td&gt;
&lt;td&gt;0.55272&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_11"&gt;まとめ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nginx&lt;/code&gt; との比較用では、&lt;code&gt;H2O&lt;/code&gt; とほぼ同じベンチマークが出た&lt;/li&gt;
&lt;li&gt;大量画像表示でも、 &lt;code&gt;H2O&lt;/code&gt; とほぼ同じベンチマークが出たが、2〜3回と繰り返すと
  HTTP4xx のエラーが発生。この条件だと信頼性は、&lt;code&gt;H2O&lt;/code&gt; に軍配があがった&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_12"&gt;参考資料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://nghttp2.org"&gt;Nghttp2: HTTP/2 C Library - nghttp2.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/tatsuhiro-t/nghttp2"&gt;tatsuhiro-t/nghttp2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://supervisord.org/"&gt;Supervisor: A Process Control System &amp;mdash; Supervisor 3.2.0 documentation&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;nghttpd は HTTP/2 プロトコルのみ動作するので HTTP/1.1 との比較検証は不可。&lt;/p&gt;
&lt;p&gt;nghttpx で可能かと思ったが、Reverse Proxy の為、単体での動作が不可なので
HTTP/1.1 のベンチマーク取得はやめた。&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;負荷発生クライアント側の open files の上限値 &lt;code&gt;ulimit -n 1024&lt;/code&gt; の為。&amp;#160;&lt;a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="http2"></category><category term="Ubuntu"></category><category term="nghttp2"></category><category term="nghttpd"></category><category term="Systemworks"></category><category term="h2load"></category><category term="Hyper-V 2012 R2"></category><category term="lubuntu"></category><category term="benchmark"></category></entry><entry><title>H2O HTTP/2 お試し</title><link href="https://lupinthe14th.github.io/h2o-http2.html" rel="alternate"></link><published>2015-12-15T16:00:00+09:00</published><updated>2015-12-15T16:41:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2015-12-15:/h2o-http2.html</id><summary type="html">&lt;p&gt;HTTP/1.x HTTP/2 に最適化された Web サーバーの実装の一つ、H2O を試しに構築してベンチマークを取得してみる。&lt;/p&gt;</summary><content type="html">&lt;p&gt;この記事は、&lt;a href="http://qiita.com/advent-calendar/2015/http2"&gt;http2 Advent Calendar 2015&lt;/a&gt;
の16日目の記事です。&lt;/p&gt;
&lt;h1 id="_1"&gt;目次&lt;/h1&gt;
&lt;div class="toc"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#_1"&gt;目次&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_2"&gt;はじめに&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#h2o"&gt;H2O とは&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_3"&gt;お試し内容&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_4"&gt;機器情報&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#h2o_1"&gt;H2O サーバー&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_5"&gt;負荷発生元クライアント&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#switching-hub"&gt;SWITCHING-HUB&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#h2o_2"&gt;H2O 環境の構築&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#_6"&gt;前提パッケージのインストール&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#openssl-102"&gt;OpenSSL 1.0.2 のインストール&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#h2o_3"&gt;H2O のビルドおよびインストール&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#h2o_4"&gt;H2O の設定&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_7"&gt;ベンチマークの取得&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#nginx"&gt;nginx との比較用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_8"&gt;大量画像表示での比較&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_9"&gt;考察&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#nginx_1"&gt;nginx と比較用&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_10"&gt;大量画像表示での比較&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#_11"&gt;まとめ&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#_12"&gt;参考資料&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;h1 id="_2"&gt;はじめに&lt;/h1&gt;
&lt;p&gt;nginx HTTP/2 お試しを行った際に検索にヒットした
&lt;a href="https://h2o.examp1e.net"&gt;H2O&lt;/a&gt; 。&lt;/p&gt;
&lt;p&gt;nginx HTTP/2 のベンチマークもあることだし、IoT 時代のHTTPサーバーとの触れ込みも
あったのでモノは試しに検証してみます。&lt;/p&gt;
&lt;p&gt;当初は、HTTP/1.1 と HTTP/2 で性能差が如実に出て終了となると思っていましたが、あ
まり性能差が出ないので、大量の画像ファイルの表示での性能差もお試ししてみました。&lt;/p&gt;
&lt;h1 id="h2o"&gt;H2O とは&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;H2Oは現在ディー・エヌ・エーに勤める奥一穂氏を中心に、2014年から開発されている
Webサーバー。プロジェクトの目的として、「クラウド、HTTP/2、常時TLS時代に最適化
されたHTTPサーバーを目指す」としている。H2OはMITライセンスを採用したオープン
ソースプロダクトで、ソースコードはGitHubで公開されている。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;引用元: &lt;a href="http://www.atmarkit.co.jp/ait/articles/1512/08/news037.html"&gt;Nginxより高速、HTTP/2 サーバー「H2O」&lt;/a&gt;&lt;/p&gt;
&lt;h1 id="_3"&gt;お試し内容&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;H2O サーバーを Hyper-V 2012 R2 上の仮想サーバー（Ubuntu 14.04） に構築する&lt;/li&gt;
&lt;li&gt;&lt;code&gt;h2load&lt;/code&gt; を用いてベンチマークを取得する&lt;/li&gt;
&lt;li&gt;&lt;code&gt;h2load&lt;/code&gt; 実行クライアント（以後、負荷発生元クライアントと表記）は、同セグメント
  で別筐体上のHyper-V 2012 R2 上の仮想サーバーに構築した lubuntu を用いる&lt;/li&gt;
&lt;li&gt;SWITHING-HUB は、 1GBits/sec 規格&lt;/li&gt;
&lt;li&gt;HTTP/1.1 と HTTP/2 での接続の違いによる性能差を比べる&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_4"&gt;機器情報&lt;/h2&gt;
&lt;p&gt;測定の際に利用する機器は以下の通り。&lt;/p&gt;
&lt;h3 id="h2o_1"&gt;H2O サーバー&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア: &lt;a href="https://www.systemworks.co.jp/pms_s403x.php"&gt;Systemworks Server S4032&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ハイパバイザー: Hyper-V 2012 R2&lt;/li&gt;
&lt;li&gt;OS: Ubuntu&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;proc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cpuinfo&lt;/span&gt;
&lt;span class="n"&gt;processor&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vendor_id&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;GenuineIntel&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;family&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Celeron&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;G1820&lt;/span&gt; &lt;span class="o"&gt;@&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="n"&gt;GHz&lt;/span&gt;
&lt;span class="n"&gt;stepping&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;microcode&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;xffffffff&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;MHz&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2677&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;835&lt;/span&gt;
&lt;span class="k"&gt;cache&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="n"&gt;KB&lt;/span&gt;
&lt;span class="n"&gt;physical&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;siblings&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;core&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;cores&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;apicid&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;initial&lt;/span&gt; &lt;span class="n"&gt;apicid&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;fpu&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;fpu_exception&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;cpuid&lt;/span&gt; &lt;span class="k"&gt;level&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;
&lt;span class="n"&gt;wp&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;flags&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fpu&lt;/span&gt; &lt;span class="n"&gt;vme&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;pse&lt;/span&gt; &lt;span class="n"&gt;tsc&lt;/span&gt; &lt;span class="n"&gt;msr&lt;/span&gt; &lt;span class="n"&gt;pae&lt;/span&gt; &lt;span class="n"&gt;mce&lt;/span&gt; &lt;span class="n"&gt;cx8&lt;/span&gt; &lt;span class="n"&gt;apic&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt; &lt;span class="n"&gt;mtrr&lt;/span&gt; &lt;span class="n"&gt;pge&lt;/span&gt; &lt;span class="n"&gt;mca&lt;/span&gt; &lt;span class="n"&gt;cmov&lt;/span&gt;
&lt;span class="n"&gt;pat&lt;/span&gt; &lt;span class="n"&gt;pse36&lt;/span&gt; &lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="n"&gt;mmx&lt;/span&gt; &lt;span class="n"&gt;fxsr&lt;/span&gt; &lt;span class="n"&gt;sse&lt;/span&gt; &lt;span class="n"&gt;sse2&lt;/span&gt; &lt;span class="n"&gt;ss&lt;/span&gt; &lt;span class="n"&gt;syscall&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt; &lt;span class="n"&gt;lm&lt;/span&gt; &lt;span class="n"&gt;constant_tsc&lt;/span&gt; &lt;span class="n"&gt;rep_good&lt;/span&gt;
&lt;span class="n"&gt;nopl&lt;/span&gt; &lt;span class="n"&gt;eagerfpu&lt;/span&gt; &lt;span class="n"&gt;pni&lt;/span&gt; &lt;span class="n"&gt;pclmulqdq&lt;/span&gt; &lt;span class="n"&gt;ssse3&lt;/span&gt; &lt;span class="n"&gt;cx16&lt;/span&gt; &lt;span class="n"&gt;sse4_1&lt;/span&gt; &lt;span class="n"&gt;sse4_2&lt;/span&gt; &lt;span class="n"&gt;movbe&lt;/span&gt; &lt;span class="n"&gt;popcnt&lt;/span&gt; &lt;span class="n"&gt;xsave&lt;/span&gt;
&lt;span class="n"&gt;rdrand&lt;/span&gt; &lt;span class="n"&gt;hypervisor&lt;/span&gt; &lt;span class="n"&gt;lahf_lm&lt;/span&gt; &lt;span class="n"&gt;abm&lt;/span&gt; &lt;span class="n"&gt;xsaveopt&lt;/span&gt; &lt;span class="n"&gt;fsgsbase&lt;/span&gt; &lt;span class="n"&gt;erms&lt;/span&gt;
&lt;span class="n"&gt;bogomips&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5355&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt;
&lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;cache_alignment&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;sizes&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;39&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;physical&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;virtual&lt;/span&gt;
&lt;span class="n"&gt;power&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;free&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
             &lt;span class="n"&gt;total&lt;/span&gt;       &lt;span class="n"&gt;used&lt;/span&gt;       &lt;span class="k"&gt;free&lt;/span&gt;     &lt;span class="n"&gt;shared&lt;/span&gt;    &lt;span class="n"&gt;buffers&lt;/span&gt;     &lt;span class="n"&gt;cached&lt;/span&gt;
&lt;span class="n"&gt;Mem&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;          &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;       &lt;span class="mi"&gt;689&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;660&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="o"&gt;-/+&lt;/span&gt; &lt;span class="n"&gt;buffers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;       &lt;span class="mi"&gt;526&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;span class="n"&gt;Swap&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;       &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;arch&lt;/span&gt;
&lt;span class="n"&gt;x86_64&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Ubuntu&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_RELEASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_CODENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;trusty&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_DESCRIPTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Ubuntu 14.04.3 LTS&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_5"&gt;負荷発生元クライアント&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア: &lt;a href="http://www.systemworks.co.jp/pms_s977x.php"&gt;Systemworks Server S9772&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ハイパバイザー: Hyper-V 2012 R2&lt;/li&gt;
&lt;li&gt;OS: lubuntu&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;proc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cpuinfo&lt;/span&gt;
&lt;span class="n"&gt;processor&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vendor_id&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;GenuineIntel&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;family&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;62&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Xeon&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;E5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2420&lt;/span&gt; &lt;span class="n"&gt;v2&lt;/span&gt; &lt;span class="o"&gt;@&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="n"&gt;GHz&lt;/span&gt;
&lt;span class="n"&gt;stepping&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
&lt;span class="n"&gt;microcode&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;xffffffff&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;MHz&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2170&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;472&lt;/span&gt;
&lt;span class="k"&gt;cache&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15360&lt;/span&gt; &lt;span class="n"&gt;KB&lt;/span&gt;
&lt;span class="n"&gt;physical&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;siblings&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;core&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;cores&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;apicid&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;initial&lt;/span&gt; &lt;span class="n"&gt;apicid&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;fpu&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;fpu_exception&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;cpuid&lt;/span&gt; &lt;span class="k"&gt;level&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;
&lt;span class="n"&gt;wp&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;flags&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fpu&lt;/span&gt; &lt;span class="n"&gt;vme&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;pse&lt;/span&gt; &lt;span class="n"&gt;tsc&lt;/span&gt; &lt;span class="n"&gt;msr&lt;/span&gt; &lt;span class="n"&gt;pae&lt;/span&gt; &lt;span class="n"&gt;mce&lt;/span&gt; &lt;span class="n"&gt;cx8&lt;/span&gt; &lt;span class="n"&gt;apic&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt; &lt;span class="n"&gt;mtrr&lt;/span&gt; &lt;span class="n"&gt;pge&lt;/span&gt; &lt;span class="n"&gt;mca&lt;/span&gt; &lt;span class="n"&gt;cmov&lt;/span&gt;
&lt;span class="n"&gt;pat&lt;/span&gt; &lt;span class="n"&gt;pse36&lt;/span&gt; &lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="n"&gt;mmx&lt;/span&gt; &lt;span class="n"&gt;fxsr&lt;/span&gt; &lt;span class="n"&gt;sse&lt;/span&gt; &lt;span class="n"&gt;sse2&lt;/span&gt; &lt;span class="n"&gt;ss&lt;/span&gt; &lt;span class="n"&gt;syscall&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt; &lt;span class="n"&gt;lm&lt;/span&gt; &lt;span class="n"&gt;constant_tsc&lt;/span&gt; &lt;span class="n"&gt;rep_good&lt;/span&gt;
&lt;span class="n"&gt;nopl&lt;/span&gt; &lt;span class="n"&gt;eagerfpu&lt;/span&gt; &lt;span class="n"&gt;pni&lt;/span&gt; &lt;span class="n"&gt;pclmulqdq&lt;/span&gt; &lt;span class="n"&gt;ssse3&lt;/span&gt; &lt;span class="n"&gt;cx16&lt;/span&gt; &lt;span class="n"&gt;sse4_1&lt;/span&gt; &lt;span class="n"&gt;sse4_2&lt;/span&gt; &lt;span class="n"&gt;popcnt&lt;/span&gt; &lt;span class="n"&gt;aes&lt;/span&gt; &lt;span class="n"&gt;xsave&lt;/span&gt; &lt;span class="n"&gt;avx&lt;/span&gt;
&lt;span class="n"&gt;f16c&lt;/span&gt; &lt;span class="n"&gt;rdrand&lt;/span&gt; &lt;span class="n"&gt;hypervisor&lt;/span&gt; &lt;span class="n"&gt;lahf_lm&lt;/span&gt; &lt;span class="n"&gt;fsgsbase&lt;/span&gt; &lt;span class="n"&gt;smep&lt;/span&gt; &lt;span class="n"&gt;erms&lt;/span&gt; &lt;span class="n"&gt;xsaveopt&lt;/span&gt;
&lt;span class="n"&gt;bugs&lt;/span&gt;        &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;bogomips&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4340&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;
&lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;cache_alignment&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;sizes&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;physical&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;virtual&lt;/span&gt;
&lt;span class="n"&gt;power&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;free&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
             &lt;span class="n"&gt;total&lt;/span&gt;       &lt;span class="n"&gt;used&lt;/span&gt;       &lt;span class="k"&gt;free&lt;/span&gt;     &lt;span class="n"&gt;shared&lt;/span&gt;    &lt;span class="n"&gt;buffers&lt;/span&gt;     &lt;span class="n"&gt;cached&lt;/span&gt;
&lt;span class="n"&gt;Mem&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;          &lt;span class="mi"&gt;982&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;287&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;694&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;        &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="o"&gt;-/+&lt;/span&gt; &lt;span class="n"&gt;buffers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;       &lt;span class="mi"&gt;147&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;834&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="n"&gt;Swap&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;arch&lt;/span&gt;
&lt;span class="n"&gt;x86_64&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Ubuntu&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_RELEASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_CODENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;vivid&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_DESCRIPTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Ubuntu 15.04&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="switching-hub"&gt;SWITCHING-HUB&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア情報: &lt;a href="http://corega.jp/prod/sw16gtxlp/index.htm"&gt;コレガ CG-SW16GTXLP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="h2o_2"&gt;H2O 環境の構築&lt;/h1&gt;
&lt;h2 id="_6"&gt;前提パッケージのインストール&lt;/h2&gt;
&lt;p&gt;ソースからビルドする為の前提パッケージをインストールする。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get install cmake build-essential zlib1g zlib1g-dev
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="openssl-102"&gt;OpenSSL 1.0.2 のインストール&lt;/h2&gt;
&lt;p&gt;前提であるOpenSSL をソースからインストールする。&lt;/p&gt;
&lt;p&gt;その為に不要なパッケージを削除する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo apt-get remove --purge openssl libssl-dev
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ソースをダウンロードしてビルドおよびインストールを行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/src
&lt;span class="gp"&gt;#&lt;/span&gt; wget https://www.openssl.org/source/openssl-1.0.2e.tar.gz --no-check-certificate
&lt;span class="gp"&gt;#&lt;/span&gt; tar xfz openssl-1.0.2e.tar.gz
&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; openssl-1.0.2e/
&lt;span class="gp"&gt;#&lt;/span&gt; ./config --prefix&lt;span class="o"&gt;=&lt;/span&gt;/usr/local --openssldir&lt;span class="o"&gt;=&lt;/span&gt;/usr/local/openssl
&lt;span class="gp"&gt;#&lt;/span&gt; make
&lt;span class="gp"&gt;#&lt;/span&gt; make &lt;span class="nb"&gt;test&lt;/span&gt;
&lt;span class="gp"&gt;#&lt;/span&gt; make install
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="h2o_3"&gt;H2O のビルドおよびインストール&lt;/h2&gt;
&lt;p&gt;以下のコマンドを実行して、ビルドおよびインストールを行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; sudo su -
&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/src
&lt;span class="gp"&gt;#&lt;/span&gt; wget https://github.com/h2o/h2o/archive/v1.6.0.tar.gz --no-check-certificate
&lt;span class="gp"&gt;#&lt;/span&gt; tar xfz v1.6.0.tar.gz
&lt;span class="gp"&gt;#&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; h2o-1.6.0/
&lt;span class="gp"&gt;#&lt;/span&gt; cmake -DWITH_BUNDLED_SSL&lt;span class="o"&gt;=&lt;/span&gt;on .
&lt;span class="gp"&gt;#&lt;/span&gt; make
&lt;span class="gp"&gt;#&lt;/span&gt; make install
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="h2o_4"&gt;H2O の設定&lt;/h2&gt;
&lt;p&gt;H2O の設定について以下に記載する。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;ディレクトリの作成&lt;/p&gt;
&lt;p&gt;ドキュメントルート、設定ファイルおよびログ出力先のディレクトリを作成する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;mkdir&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;log&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自己署名証明書の作成&lt;/p&gt;
&lt;p&gt;OpenSSL コマンドにて自己署名証明書を作成する。&lt;/p&gt;
&lt;p&gt;途中、証明書要求ファイルを作成する際に入力を求められるが、FQDN のみ適切な値
を入力する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;genrsa&lt;/span&gt; &lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;  &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;csr&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;x509&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="mi"&gt;3650&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;req&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signkey&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;csr&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;h2o.conf の作成&lt;/p&gt;
&lt;p&gt;お試し用の &lt;code&gt;/usr/local/etc/h2o/h2o.conf&lt;/code&gt; の作成を行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;hosts&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="ss"&gt;&amp;quot;www.example.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;443&lt;/span&gt;
      &lt;span class="n"&gt;ssl&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;certificate&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;
        &lt;span class="k"&gt;key&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;
    &lt;span class="n"&gt;paths&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="ss"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dir&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;

&lt;span class="n"&gt;http2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;reprioritize&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;blocking&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;assets&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;ON&lt;/span&gt;   &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;performance&lt;/span&gt; &lt;span class="n"&gt;tuning&lt;/span&gt; &lt;span class="k"&gt;option&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Supervisor のインストールおよび設定&lt;/p&gt;
&lt;p&gt;Supervisor のインストールを行い、H2O を登録して自動起動および起動停止を楽に
出来る様にする。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;apt-get&lt;/code&gt; にて Supervisor のインストールを行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;supervisor&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;/etc/supervisor/conf.d/h2o.conf&lt;/code&gt; の編集を行い Supervisor に、 H2O の設定を
行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[program:h2o]&lt;/span&gt;
&lt;span class="na"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;/usr/local/bin/h2o -c /usr/local/etc/h2o/h2o.conf&lt;/span&gt;
&lt;span class="na"&gt;autostart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;span class="na"&gt;autorestart&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Supervisor の再起動&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="n"&gt;supervisor&lt;/span&gt; &lt;span class="k"&gt;restart&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;h2o の起動&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;supervisorctl&lt;/span&gt; &lt;span class="k"&gt;start&lt;/span&gt; &lt;span class="n"&gt;h2o&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;大量画像表示サイトの構築&lt;/p&gt;
&lt;p&gt;大量の画像を表示するサイトを以下の方法で作成する。&lt;/p&gt;
&lt;p&gt;テスト画像を、&lt;a href="http://www.vision.caltech.edu/Image_Datasets/Caltech101/101_ObjectCategories.tar.gz"&gt;Caltech 101&lt;/a&gt;
からダウンロードして、解凍する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;h2o&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;www&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vision&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;caltech&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;edu&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Image_Datasets&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Caltech101&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;101&lt;/span&gt;&lt;span class="n"&gt;_ObjectCategories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;xfz&lt;/span&gt; &lt;span class="mi"&gt;101&lt;/span&gt;&lt;span class="n"&gt;_ObjectCategories&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;画像数: 9144
容量: 151MByte&lt;/p&gt;
&lt;p&gt;img.html (513KBytes) を以下の様に作成する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;h1&amp;gt;&lt;/span&gt;HTTP2 TEST&lt;span class="nt"&gt;&amp;lt;/h1&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0001.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0002.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0003.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0004.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/BACKGROUND_Google/image_0005.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
・
・
・
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0053.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0054.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0055.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0056.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0057.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0058.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0059.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;img&lt;/span&gt; &lt;span class="na"&gt;src=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;101_ObjectCategories/yin_yang/image_0060.jpg&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_7"&gt;ベンチマークの取得&lt;/h2&gt;
&lt;p&gt;試験内容と得られたベンチマーク値をそれぞれ記載する。&lt;/p&gt;
&lt;h3 id="nginx"&gt;nginx との比較用&lt;/h3&gt;
&lt;p&gt;後でnginx の結果と比較するので、同じ index.html (612bytes) を用いてベンチマークを
取得する。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;リクエストコマンドの決定&lt;/p&gt;
&lt;p&gt;nginx で使用したリクエスト数を生成するコマンドにて実行する。
なお、H2O は サーバー側の設定で、 HTTP/1.1 で動作させる様に設定できないっぽ
い。
その為、HTTP/1.1 のベンチマーク取得の場合は、h2load のオプションに
&lt;code&gt;--h1&lt;/code&gt; を付与して、強制的に HTTP/1.1 接続する。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;コマンド&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;HTTP/2&lt;/dt&gt;
&lt;dd&gt;&lt;code&gt;h2load -n 100000 -c 50 -m 50 https://www.example.com/&lt;/code&gt;&lt;/dd&gt;
&lt;dt&gt;HTTP/1.1&lt;/dt&gt;
&lt;dd&gt;&lt;code&gt;h2load -n 100000 -c 50 -m 50 --h1 https://www.example.com/&lt;/code&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;h2load オプション説明&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;-n&lt;/dt&gt;
&lt;dd&gt;総リクエスト数&lt;/dd&gt;
&lt;dt&gt;-c&lt;/dt&gt;
&lt;dd&gt;クライアント数&lt;/dd&gt;
&lt;dt&gt;-m&lt;/dt&gt;
&lt;dd&gt;クライアント当たりの、最大ストリーム並列数&lt;/dd&gt;
&lt;dt&gt;--h1&lt;/dt&gt;
&lt;dd&gt;接続プロトコルを HTTP/1.1 に強制&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/2 でのベンチマーク&lt;/p&gt;
&lt;p&gt;HTTP/2 の場合に取得した値は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;www&lt;/span&gt;.&lt;span class="nv"&gt;example&lt;/span&gt;.&lt;span class="nv"&gt;com&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;h2&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;62&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;61617&lt;/span&gt;.&lt;span class="mi"&gt;18&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;37&lt;/span&gt;.&lt;span class="mi"&gt;79&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;64306650&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;1305150&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;92&lt;/span&gt;.&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;61200000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:     &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;103&lt;/span&gt;.&lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;32&lt;/span&gt;.&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;11&lt;/span&gt;.&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;74&lt;/span&gt;.&lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:   &lt;span class="mi"&gt;240&lt;/span&gt;.&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;303&lt;/span&gt;.&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;270&lt;/span&gt;.&lt;span class="mi"&gt;74&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;19&lt;/span&gt;.&lt;span class="mi"&gt;41&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;56&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:   &lt;span class="mi"&gt;302&lt;/span&gt;.&lt;span class="mi"&gt;93&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;368&lt;/span&gt;.&lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;327&lt;/span&gt;.&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;17&lt;/span&gt;.&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;74&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :    &lt;span class="mi"&gt;1233&lt;/span&gt;.&lt;span class="mi"&gt;07&lt;/span&gt;     &lt;span class="mi"&gt;1474&lt;/span&gt;.&lt;span class="mi"&gt;02&lt;/span&gt;     &lt;span class="mi"&gt;1275&lt;/span&gt;.&lt;span class="mi"&gt;80&lt;/span&gt;       &lt;span class="mi"&gt;52&lt;/span&gt;.&lt;span class="mi"&gt;54&lt;/span&gt;    &lt;span class="mi"&gt;80&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/1.1 でのベンチマーク&lt;/p&gt;
&lt;p&gt;HTTP/1.1 の場合に取得した値は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nv"&gt;h1&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;www&lt;/span&gt;.&lt;span class="nv"&gt;example&lt;/span&gt;.&lt;span class="nv"&gt;com&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;http&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;51409&lt;/span&gt;.&lt;span class="mi"&gt;78&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;41&lt;/span&gt;.&lt;span class="mi"&gt;53&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;84700000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;18400000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;61200000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:     &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;176&lt;/span&gt;.&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;41&lt;/span&gt;.&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;14&lt;/span&gt;.&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;88&lt;/span&gt;.&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:   &lt;span class="mi"&gt;153&lt;/span&gt;.&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;304&lt;/span&gt;.&lt;span class="mi"&gt;62&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;261&lt;/span&gt;.&lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;39&lt;/span&gt;.&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;84&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:   &lt;span class="mi"&gt;271&lt;/span&gt;.&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;344&lt;/span&gt;.&lt;span class="mi"&gt;54&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;319&lt;/span&gt;.&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;18&lt;/span&gt;.&lt;span class="mi"&gt;66&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;78&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :    &lt;span class="mi"&gt;1028&lt;/span&gt;.&lt;span class="mi"&gt;91&lt;/span&gt;     &lt;span class="mi"&gt;1064&lt;/span&gt;.&lt;span class="mi"&gt;36&lt;/span&gt;     &lt;span class="mi"&gt;1041&lt;/span&gt;.&lt;span class="mi"&gt;95&lt;/span&gt;        &lt;span class="mi"&gt;8&lt;/span&gt;.&lt;span class="mi"&gt;90&lt;/span&gt;    &lt;span class="mi"&gt;62&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_8"&gt;大量画像表示での比較&lt;/h3&gt;
&lt;p&gt;大量に画像を表示する img.html (513Kbytes) を用いてベンチマークを取得する。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;リクエストコマンドの決定&lt;/p&gt;
&lt;p&gt;クライアント数 = クライアント当たりの、最大ストリーム並列数 = 1021 から
&lt;code&gt;client could not connect to host&lt;/code&gt; が出始める &lt;sup id="fnref:1"&gt;&lt;a class="footnote-ref" href="#fn:1"&gt;1&lt;/a&gt;&lt;/sup&gt; ので、
コマンドは以下を用いる。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;コマンド&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;HTTP/2&lt;/dt&gt;
&lt;dd&gt;&lt;code&gt;h2load -n 100000 -c 1020 -m 1020 https://www.example.com/img.html&lt;/code&gt;&lt;/dd&gt;
&lt;dt&gt;HTTP/1.1&lt;/dt&gt;
&lt;dd&gt;&lt;code&gt;h2load -n 100000 -c 1020 -m 1020 --h1 https://www.example.com/img.html&lt;/code&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;h2load オプション説明&lt;/p&gt;
&lt;dl&gt;
&lt;dt&gt;-n&lt;/dt&gt;
&lt;dd&gt;総リクエスト数&lt;/dd&gt;
&lt;dt&gt;-c&lt;/dt&gt;
&lt;dd&gt;クライアント数&lt;/dd&gt;
&lt;dt&gt;-m&lt;/dt&gt;
&lt;dd&gt;クライアント当たりの、最大ストリーム並列数&lt;/dd&gt;
&lt;dt&gt;--h1&lt;/dt&gt;
&lt;dd&gt;接続プロトコルを HTTP/1.1 に強制&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/2 でのベンチマーク&lt;/p&gt;
&lt;p&gt;HTTP/2 の場合に取得した値は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;www&lt;/span&gt;.&lt;span class="nv"&gt;example&lt;/span&gt;.&lt;span class="nv"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;img&lt;/span&gt;.&lt;span class="nv"&gt;html&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;h2&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;459&lt;/span&gt;.&lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;217&lt;/span&gt;.&lt;span class="mi"&gt;63&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;109&lt;/span&gt;.&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;52562722760&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;1682620&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt;.&lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;52530400000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:    &lt;span class="mi"&gt;399&lt;/span&gt;.&lt;span class="mi"&gt;97&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;457&lt;/span&gt;.&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;444&lt;/span&gt;.&lt;span class="mi"&gt;73&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;      &lt;span class="mi"&gt;10&lt;/span&gt;.&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;74&lt;/span&gt;.&lt;span class="mi"&gt;85&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:   &lt;span class="mi"&gt;902&lt;/span&gt;.&lt;span class="mi"&gt;87&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;43&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;593&lt;/span&gt;.&lt;span class="mi"&gt;99&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;81&lt;/span&gt;.&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:      &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;06&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;4&lt;/span&gt;.&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;01&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;508&lt;/span&gt;.&lt;span class="mi"&gt;95&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;73&lt;/span&gt;.&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :       &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;21&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;24&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;01&lt;/span&gt;    &lt;span class="mi"&gt;75&lt;/span&gt;.&lt;span class="mi"&gt;78&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/1.1 でのベンチマーク&lt;/p&gt;
&lt;p&gt;HTTP/1.1 の場合に取得した値は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="nv"&gt;h1&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;www&lt;/span&gt;.&lt;span class="nv"&gt;example&lt;/span&gt;.&lt;span class="nv"&gt;com&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;img&lt;/span&gt;.&lt;span class="nv"&gt;html&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;1020&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES128&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA256&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;http&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;459&lt;/span&gt;.&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;217&lt;/span&gt;.&lt;span class="mi"&gt;75&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;109&lt;/span&gt;.&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;52554400000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;18900000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;52530400000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:      &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;29&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;458&lt;/span&gt;.&lt;span class="mi"&gt;31&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;230&lt;/span&gt;.&lt;span class="mi"&gt;99&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;     &lt;span class="mi"&gt;131&lt;/span&gt;.&lt;span class="mi"&gt;57&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;57&lt;/span&gt;.&lt;span class="mi"&gt;74&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:   &lt;span class="mi"&gt;877&lt;/span&gt;.&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;44&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;526&lt;/span&gt;.&lt;span class="mi"&gt;48&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;87&lt;/span&gt;.&lt;span class="mi"&gt;55&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:      &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;97&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;4&lt;/span&gt;.&lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;       &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;460&lt;/span&gt;.&lt;span class="mi"&gt;73&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;82&lt;/span&gt;.&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :       &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;21&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;25&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;22&lt;/span&gt;        &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;01&lt;/span&gt;    &lt;span class="mi"&gt;79&lt;/span&gt;.&lt;span class="mi"&gt;31&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h1 id="_9"&gt;考察&lt;/h1&gt;
&lt;h2 id="nginx_1"&gt;nginx と比較用&lt;/h2&gt;
&lt;p&gt;nginx との比較用でのベンチマークは、HTTP/1.1 および HTTP/2 でそれぞれ
以下の表の通り。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;HTTP Version&lt;/th&gt;
&lt;th&gt;Time (sec)&lt;/th&gt;
&lt;th&gt;Requests/sec&lt;/th&gt;
&lt;th&gt;Requests/succeeded&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1.1&lt;/td&gt;
&lt;td&gt;1.95&lt;/td&gt;
&lt;td&gt;51409.78&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;1.62&lt;/td&gt;
&lt;td&gt;61617.18&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_10"&gt;大量画像表示での比較&lt;/h2&gt;
&lt;p&gt;大量画像表示でのベンチマークは、HTTP/1.1 および HTTP/2 でそれぞれ
以下の表の通り。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;HTTP Version&lt;/th&gt;
&lt;th&gt;Time (sec)&lt;/th&gt;
&lt;th&gt;Requests/sec&lt;/th&gt;
&lt;th&gt;Requests/succeeded&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1.1&lt;/td&gt;
&lt;td&gt;459.23&lt;/td&gt;
&lt;td&gt;217.75&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;459.49&lt;/td&gt;
&lt;td&gt;217.63&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="_11"&gt;まとめ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;H2O の場合だと、このリクエスト規模ではHTTP/1.1 と HTTP/2 の性能差は、 HTTP/2
  の方が若干速い程度&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;単純なHTMLを表示する場合でも、大量画像表示HTMLの場合でも、HTTP/1.1 と、HTTP/2
  の性能差は見られなかった&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;つまり、HTTP/2 対応のブラウザのみがこの速度の恩恵を受けるものではない&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;爆速との記事を多数みてましたが、爆速。nginx との比較は後でやろうと思いますが約
  2倍の速さ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_12"&gt;参考資料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://h2o.examp1e.net"&gt;H2O - the optimized HTTP/2 server&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.slideshare.net/kazuho/h2o-43944586"&gt;H2O - making HTTP better&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/h2o/h2o"&gt;Home · h2o/h2o Wiki&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://blog.kazuhooku.com/2015/12/h2o-http2-server-version-160-released.html"&gt;Kazuho's Weblog: H2O HTTP/2 server version 1.6.0 released&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://d.hatena.ne.jp/mallowlabs/20150828/h2o_supervisord_munin"&gt;h2o + supervisord で Munin を HTTP/2 でサーブさせてみた - mallowlabsの備忘録&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://supervisord.org/"&gt;Supervisor: A Process Control System &amp;mdash; Supervisor 3.2.0 documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://qiita.com/0xfffffff7/items/dc41cf560e0e0ea4bdbc"&gt;[HTTP2] WindowsServerでHTTP2のベンチマーク - Qiita&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="footnote"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;負荷発生クライアント側の open files の上限値 &lt;code&gt;ulimit -n 1024&lt;/code&gt; の為。&amp;#160;&lt;a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</content><category term="http2"></category><category term="Ubuntu"></category><category term="h2o"></category><category term="Systemworks"></category><category term="h2load"></category><category term="Hyper-V 2012 R2"></category><category term="lubuntu"></category><category term="benchmark"></category></entry><entry><title>nginx HTTP/2 お試し</title><link href="https://lupinthe14th.github.io/nginx-http2.html" rel="alternate"></link><published>2015-12-09T17:40:00+09:00</published><updated>2015-12-15T16:41:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2015-12-09:/nginx-http2.html</id><summary type="html">&lt;p&gt;nginx 1.9.5 で HTTP/2 がサポートされたので試しに構築してベンチマーク取&lt;/p&gt;</summary><content type="html">&lt;p&gt;得してみた。&lt;/p&gt;
&lt;p&gt;この記事は、&lt;a href="http://qiita.com/advent-calendar/2015/nginx"&gt;nginx Advent Calendar 2015&lt;/a&gt;
の9日目の記事です。&lt;/p&gt;
&lt;h1 id="_1"&gt;はじめに&lt;/h1&gt;
&lt;p&gt;HTTP/2 が nginx 1.9.5 でサポートされた事を今更ながら知った。
どんなものかお試ししてみる。&lt;/p&gt;
&lt;p&gt;この記事は、お試しする為の環境構築とお試し内容およびその考察について記載したもの
です。&lt;/p&gt;
&lt;h1 id="_2"&gt;お試し内容&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;nginx 1.9.5 のhttp2 が有効か無効かの違いのみで、 &lt;code&gt;h2load&lt;/code&gt; を用いてベンチマーク
  を取得する。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;h2load&lt;/code&gt; 実行クライアント（以後、負荷発生元クライアントと表記）は、同セグメント
  で別筐体上のHyper-V 2012 R2 上の仮想サーバーに構築した lubuntu を用いる。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_3"&gt;機器情報&lt;/h2&gt;
&lt;p&gt;測定の際に利用する機器は以下の通り。&lt;/p&gt;
&lt;h3 id="nginx"&gt;nginx サーバー&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア: &lt;a href="https://www.systemworks.co.jp/pms_s403x.php"&gt;Systemworks Server S4032&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ハイパバイザー: Hyper-V 2012 R2&lt;/li&gt;
&lt;li&gt;OS: Ubuntu &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;proc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cpuinfo&lt;/span&gt;
&lt;span class="n"&gt;processor&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vendor_id&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;GenuineIntel&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;family&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;60&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Celeron&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;G1820&lt;/span&gt; &lt;span class="o"&gt;@&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="n"&gt;GHz&lt;/span&gt;
&lt;span class="n"&gt;stepping&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="n"&gt;microcode&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;xffffffff&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;MHz&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2677&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;835&lt;/span&gt;
&lt;span class="k"&gt;cache&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="n"&gt;KB&lt;/span&gt;
&lt;span class="n"&gt;physical&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;siblings&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;core&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;cores&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;apicid&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;initial&lt;/span&gt; &lt;span class="n"&gt;apicid&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;fpu&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;fpu_exception&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;cpuid&lt;/span&gt; &lt;span class="k"&gt;level&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;
&lt;span class="n"&gt;wp&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;flags&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fpu&lt;/span&gt; &lt;span class="n"&gt;vme&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;pse&lt;/span&gt; &lt;span class="n"&gt;tsc&lt;/span&gt; &lt;span class="n"&gt;msr&lt;/span&gt; &lt;span class="n"&gt;pae&lt;/span&gt; &lt;span class="n"&gt;mce&lt;/span&gt; &lt;span class="n"&gt;cx8&lt;/span&gt; &lt;span class="n"&gt;apic&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt; &lt;span class="n"&gt;mtrr&lt;/span&gt; &lt;span class="n"&gt;pge&lt;/span&gt; &lt;span class="n"&gt;mca&lt;/span&gt; &lt;span class="n"&gt;cmov&lt;/span&gt;
&lt;span class="n"&gt;pat&lt;/span&gt; &lt;span class="n"&gt;pse36&lt;/span&gt; &lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="n"&gt;mmx&lt;/span&gt; &lt;span class="n"&gt;fxsr&lt;/span&gt; &lt;span class="n"&gt;sse&lt;/span&gt; &lt;span class="n"&gt;sse2&lt;/span&gt; &lt;span class="n"&gt;ss&lt;/span&gt; &lt;span class="n"&gt;syscall&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt; &lt;span class="n"&gt;lm&lt;/span&gt; &lt;span class="n"&gt;constant_tsc&lt;/span&gt; &lt;span class="n"&gt;rep_good&lt;/span&gt;
&lt;span class="n"&gt;nopl&lt;/span&gt; &lt;span class="n"&gt;eagerfpu&lt;/span&gt; &lt;span class="n"&gt;pni&lt;/span&gt; &lt;span class="n"&gt;pclmulqdq&lt;/span&gt; &lt;span class="n"&gt;ssse3&lt;/span&gt; &lt;span class="n"&gt;cx16&lt;/span&gt; &lt;span class="n"&gt;sse4_1&lt;/span&gt; &lt;span class="n"&gt;sse4_2&lt;/span&gt; &lt;span class="n"&gt;movbe&lt;/span&gt; &lt;span class="n"&gt;popcnt&lt;/span&gt; &lt;span class="n"&gt;xsave&lt;/span&gt;
&lt;span class="n"&gt;rdrand&lt;/span&gt; &lt;span class="n"&gt;hypervisor&lt;/span&gt; &lt;span class="n"&gt;lahf_lm&lt;/span&gt; &lt;span class="n"&gt;abm&lt;/span&gt; &lt;span class="n"&gt;xsaveopt&lt;/span&gt; &lt;span class="n"&gt;fsgsbase&lt;/span&gt; &lt;span class="n"&gt;erms&lt;/span&gt;
&lt;span class="n"&gt;bogomips&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;5355&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt;
&lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;cache_alignment&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;sizes&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;39&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;physical&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;virtual&lt;/span&gt;
&lt;span class="n"&gt;power&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;free&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
             &lt;span class="n"&gt;total&lt;/span&gt;       &lt;span class="n"&gt;used&lt;/span&gt;       &lt;span class="k"&gt;free&lt;/span&gt;     &lt;span class="n"&gt;shared&lt;/span&gt;    &lt;span class="n"&gt;buffers&lt;/span&gt;     &lt;span class="n"&gt;cached&lt;/span&gt;
&lt;span class="n"&gt;Mem&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;          &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;       &lt;span class="mi"&gt;689&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;660&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="o"&gt;-/+&lt;/span&gt; &lt;span class="n"&gt;buffers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;       &lt;span class="mi"&gt;526&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;
&lt;span class="n"&gt;Swap&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;       &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;arch&lt;/span&gt;
&lt;span class="n"&gt;x86_64&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Ubuntu&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_RELEASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_CODENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;trusty&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_DESCRIPTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Ubuntu 14.04.3 LTS&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="_4"&gt;負荷発生元クライアント&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ハードウェア: &lt;a href="http://www.systemworks.co.jp/pms_s977x.php"&gt;Systemworks Server S9772&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ハイパバイザー: Hyper-V 2012 R2&lt;/li&gt;
&lt;li&gt;OS: lubuntu &lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;proc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;cpuinfo&lt;/span&gt;
&lt;span class="n"&gt;processor&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;vendor_id&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;GenuineIntel&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;family&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;62&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Intel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;Xeon&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;CPU&lt;/span&gt; &lt;span class="n"&gt;E5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2420&lt;/span&gt; &lt;span class="n"&gt;v2&lt;/span&gt; &lt;span class="o"&gt;@&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="n"&gt;GHz&lt;/span&gt;
&lt;span class="n"&gt;stepping&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
&lt;span class="n"&gt;microcode&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;xffffffff&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;MHz&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2170&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;472&lt;/span&gt;
&lt;span class="k"&gt;cache&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;15360&lt;/span&gt; &lt;span class="n"&gt;KB&lt;/span&gt;
&lt;span class="n"&gt;physical&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;siblings&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;core&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;cpu&lt;/span&gt; &lt;span class="n"&gt;cores&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;apicid&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;initial&lt;/span&gt; &lt;span class="n"&gt;apicid&lt;/span&gt;  &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="n"&gt;fpu&lt;/span&gt;     &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;fpu_exception&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;cpuid&lt;/span&gt; &lt;span class="k"&gt;level&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;
&lt;span class="n"&gt;wp&lt;/span&gt;      &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;yes&lt;/span&gt;
&lt;span class="n"&gt;flags&lt;/span&gt;       &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fpu&lt;/span&gt; &lt;span class="n"&gt;vme&lt;/span&gt; &lt;span class="n"&gt;de&lt;/span&gt; &lt;span class="n"&gt;pse&lt;/span&gt; &lt;span class="n"&gt;tsc&lt;/span&gt; &lt;span class="n"&gt;msr&lt;/span&gt; &lt;span class="n"&gt;pae&lt;/span&gt; &lt;span class="n"&gt;mce&lt;/span&gt; &lt;span class="n"&gt;cx8&lt;/span&gt; &lt;span class="n"&gt;apic&lt;/span&gt; &lt;span class="n"&gt;sep&lt;/span&gt; &lt;span class="n"&gt;mtrr&lt;/span&gt; &lt;span class="n"&gt;pge&lt;/span&gt; &lt;span class="n"&gt;mca&lt;/span&gt; &lt;span class="n"&gt;cmov&lt;/span&gt;
&lt;span class="n"&gt;pat&lt;/span&gt; &lt;span class="n"&gt;pse36&lt;/span&gt; &lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="n"&gt;mmx&lt;/span&gt; &lt;span class="n"&gt;fxsr&lt;/span&gt; &lt;span class="n"&gt;sse&lt;/span&gt; &lt;span class="n"&gt;sse2&lt;/span&gt; &lt;span class="n"&gt;ss&lt;/span&gt; &lt;span class="n"&gt;syscall&lt;/span&gt; &lt;span class="n"&gt;nx&lt;/span&gt; &lt;span class="n"&gt;lm&lt;/span&gt; &lt;span class="n"&gt;constant_tsc&lt;/span&gt; &lt;span class="n"&gt;rep_good&lt;/span&gt;
&lt;span class="n"&gt;nopl&lt;/span&gt; &lt;span class="n"&gt;eagerfpu&lt;/span&gt; &lt;span class="n"&gt;pni&lt;/span&gt; &lt;span class="n"&gt;pclmulqdq&lt;/span&gt; &lt;span class="n"&gt;ssse3&lt;/span&gt; &lt;span class="n"&gt;cx16&lt;/span&gt; &lt;span class="n"&gt;sse4_1&lt;/span&gt; &lt;span class="n"&gt;sse4_2&lt;/span&gt; &lt;span class="n"&gt;popcnt&lt;/span&gt; &lt;span class="n"&gt;aes&lt;/span&gt; &lt;span class="n"&gt;xsave&lt;/span&gt; &lt;span class="n"&gt;avx&lt;/span&gt;
&lt;span class="n"&gt;f16c&lt;/span&gt; &lt;span class="n"&gt;rdrand&lt;/span&gt; &lt;span class="n"&gt;hypervisor&lt;/span&gt; &lt;span class="n"&gt;lahf_lm&lt;/span&gt; &lt;span class="n"&gt;fsgsbase&lt;/span&gt; &lt;span class="n"&gt;smep&lt;/span&gt; &lt;span class="n"&gt;erms&lt;/span&gt; &lt;span class="n"&gt;xsaveopt&lt;/span&gt;
&lt;span class="n"&gt;bugs&lt;/span&gt;        &lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;bogomips&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;4340&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;94&lt;/span&gt;
&lt;span class="n"&gt;clflush&lt;/span&gt; &lt;span class="k"&gt;size&lt;/span&gt;    &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;cache_alignment&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;
&lt;span class="n"&gt;address&lt;/span&gt; &lt;span class="n"&gt;sizes&lt;/span&gt;   &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;physical&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;48&lt;/span&gt; &lt;span class="n"&gt;bits&lt;/span&gt; &lt;span class="n"&gt;virtual&lt;/span&gt;
&lt;span class="n"&gt;power&lt;/span&gt; &lt;span class="n"&gt;management&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="k"&gt;free&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;
             &lt;span class="n"&gt;total&lt;/span&gt;       &lt;span class="n"&gt;used&lt;/span&gt;       &lt;span class="k"&gt;free&lt;/span&gt;     &lt;span class="n"&gt;shared&lt;/span&gt;    &lt;span class="n"&gt;buffers&lt;/span&gt;     &lt;span class="n"&gt;cached&lt;/span&gt;
&lt;span class="n"&gt;Mem&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;          &lt;span class="mi"&gt;982&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;287&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;694&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;        &lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="o"&gt;-/+&lt;/span&gt; &lt;span class="n"&gt;buffers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;cache&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;       &lt;span class="mi"&gt;147&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;       &lt;span class="mi"&gt;834&lt;/span&gt;&lt;span class="n"&gt;M&lt;/span&gt;
&lt;span class="n"&gt;Swap&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;         &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;B&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="k"&gt;G&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;arch&lt;/span&gt;
&lt;span class="n"&gt;x86_64&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;etc&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;release&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Ubuntu&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_RELEASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;04&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_CODENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;vivid&lt;/span&gt;
&lt;span class="n"&gt;DISTRIB_DESCRIPTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;&amp;quot;Ubuntu 15.04&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="_5"&gt;環境構築&lt;/h2&gt;
&lt;p&gt;測定を行う為に用いたnginx サーバーと 負荷発性元クライアントの構築方法をそれぞれ
以下に記載する。&lt;/p&gt;
&lt;h3 id="_6"&gt;負荷発生元クライアントの構築&lt;/h3&gt;
&lt;p&gt;負荷発生元クライアントに、&lt;code&gt;h2load&lt;/code&gt; をソースからインストールする。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;必要パッケージのインストール&lt;/p&gt;
&lt;p&gt;以下コマンドにて事前に必要なパッケージをインストールする。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install g++ make binutils autoconf automake &lt;span class="se"&gt;\&lt;/span&gt;
               autotools-dev libtool pkg-config zlib1g-dev &lt;span class="se"&gt;\&lt;/span&gt;
               libcunit1-dev libssl-dev libxml2-dev libev-dev &lt;span class="se"&gt;\&lt;/span&gt;
               libevent-dev libjansson-dev libjemalloc-dev cython &lt;span class="se"&gt;\&lt;/span&gt;
               python3-dev python-setuptools
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ソースの取得&lt;/p&gt;
&lt;p&gt;github リポジトリから、&lt;code&gt;git clone&lt;/code&gt; にて、リポジトリのクローンを作成する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /usr/local/src
$ sudo git clone https://github.com/tatsuhiro-t/nghttp2.git
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;make&lt;/p&gt;
&lt;p&gt;&lt;code&gt;make&lt;/code&gt; コマンドにて、ビルド -&amp;gt; インストールを行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; nghttp2/
$ sudo autoreconf -i
$ sudo automake
$ sudo autoconf
$ sudo ./configure
$ sudo make
$ sudo make install
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ライブラリへパスを通す&lt;/p&gt;
&lt;p&gt;ホームディレクトリの &lt;code&gt;.profile&lt;/code&gt; を編集してライブラリへパスを通す。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;LD_LIBRARY_PATH&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;export&lt;/span&gt; &lt;span class="n"&gt;LD_LIBRARY_PATH&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;h2load コマンドの確認&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.profile&lt;/code&gt; 編集後、 &lt;code&gt;h2load&lt;/code&gt; コマンドが実行可能か確認する。以下の様にコマンド
を実行し、&lt;code&gt;h2load&lt;/code&gt; コマンドのヘルプが表示されることを確認する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;source&lt;/span&gt; ~/.profile
$ h2load --help
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="nginx_1"&gt;nginx サーバーの構築&lt;/h3&gt;
&lt;p&gt;nginx サーバーの構築方法を以下に記載する。&lt;/p&gt;
&lt;h4 id="nginx-195"&gt;nginx 1.9.5 のインストール&lt;/h4&gt;
&lt;p&gt;nginx サーバーに、nginx 1.9.5 をソースからインストールする。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;前提パッケージのインストール&lt;/p&gt;
&lt;p&gt;&lt;code&gt;apt-get&lt;/code&gt; にてビルドに必要なパッケージをインストールする。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;sudo&lt;/span&gt; &lt;span class="n"&gt;apt&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;get&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;build&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;essential&lt;/span&gt; &lt;span class="n"&gt;libc6&lt;/span&gt; &lt;span class="n"&gt;libpcre3&lt;/span&gt; &lt;span class="n"&gt;libpcre3&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="err"&gt;\&lt;/span&gt;
              &lt;span class="n"&gt;libpcrecpp0&lt;/span&gt; &lt;span class="n"&gt;libssl0&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt; &lt;span class="n"&gt;libssl&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;zlib1g&lt;/span&gt; &lt;span class="n"&gt;zlib1g&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt; &lt;span class="n"&gt;lsb&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ソースのダウンロードと解凍&lt;/p&gt;
&lt;p&gt;以下のコマンドでソースをダウンロードし、解凍を行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;wget&lt;/span&gt; &lt;span class="n"&gt;http&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;download&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;xvfz&lt;/span&gt; &lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tar&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gz&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;make&lt;/p&gt;
&lt;p&gt;以下のコマンドにて、ビルドを行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;configure&lt;/span&gt; &lt;span class="c1"&gt;--with-http_ssl_module \&lt;/span&gt;
              &lt;span class="c1"&gt;--with-http_v2_module \&lt;/span&gt;
              &lt;span class="c1"&gt;--with-debug&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;make&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="nginx_2"&gt;nginx の設定&lt;/h4&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;nginx.conf の作成&lt;/p&gt;
&lt;p&gt;お試し用の &lt;code&gt;/usr/local/nginx/conf/nginx.conf&lt;/code&gt; の作成を行う。&lt;/p&gt;
&lt;p&gt;以下は、HTTP/2 を有効にした場合で、HTTP/2 を無効にする場合は、&lt;/p&gt;
&lt;p&gt;&lt;code&gt;listen       443 ssl http2;&lt;/code&gt; を &lt;code&gt;listen       443 ssl;&lt;/code&gt;
に変更する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;worker_processes&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

&lt;span class="nv"&gt;events&lt;/span&gt; {
    &lt;span class="nv"&gt;worker_connections&lt;/span&gt;  &lt;span class="mi"&gt;16384&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
}

&lt;span class="nv"&gt;http&lt;/span&gt; {
    &lt;span class="k"&gt;include&lt;/span&gt;       &lt;span class="nv"&gt;mime&lt;/span&gt;.&lt;span class="nv"&gt;types&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
    &lt;span class="nv"&gt;default_type&lt;/span&gt;  &lt;span class="nv"&gt;application&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;octet&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;stream&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;sendfile&lt;/span&gt;        &lt;span class="nv"&gt;on&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

    &lt;span class="nv"&gt;keepalive_timeout&lt;/span&gt;  &lt;span class="mi"&gt;65&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

    &lt;span class="nv"&gt;server&lt;/span&gt; {
        &lt;span class="nv"&gt;listen&lt;/span&gt;       &lt;span class="mi"&gt;443&lt;/span&gt; &lt;span class="nv"&gt;ssl&lt;/span&gt; &lt;span class="nv"&gt;http2&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

        &lt;span class="nv"&gt;ssl_certificate&lt;/span&gt;      &lt;span class="nv"&gt;cert&lt;/span&gt;.&lt;span class="nv"&gt;pem&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
        &lt;span class="nv"&gt;ssl_certificate_key&lt;/span&gt;  &lt;span class="nv"&gt;cert&lt;/span&gt;.&lt;span class="nv"&gt;key&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

        &lt;span class="nv"&gt;ssl_session_cache&lt;/span&gt;    &lt;span class="nv"&gt;shared&lt;/span&gt;:&lt;span class="nv"&gt;SSL&lt;/span&gt;:&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
        &lt;span class="nv"&gt;ssl_session_timeout&lt;/span&gt;  &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

        &lt;span class="nv"&gt;ssl_ciphers&lt;/span&gt;  &lt;span class="nv"&gt;AESGCM&lt;/span&gt;:&lt;span class="nv"&gt;HIGH&lt;/span&gt;:&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nv"&gt;aNULL&lt;/span&gt;:&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="nv"&gt;MD5&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
        &lt;span class="nv"&gt;ssl_prefer_server_ciphers&lt;/span&gt;  &lt;span class="nv"&gt;on&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;

        &lt;span class="nv"&gt;location&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; {
            &lt;span class="nv"&gt;root&lt;/span&gt;   &lt;span class="nv"&gt;html&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
            &lt;span class="nv"&gt;index&lt;/span&gt;  &lt;span class="nv"&gt;index&lt;/span&gt;.&lt;span class="nv"&gt;html&lt;/span&gt; &lt;span class="nv"&gt;index&lt;/span&gt;.&lt;span class="nv"&gt;htm&lt;/span&gt;&lt;span class="c1"&gt;;&lt;/span&gt;
        }
    }
}
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自己署名証明書の作成&lt;/p&gt;
&lt;p&gt;OpenSSL コマンドにて自己署名証明書を作成する。&lt;/p&gt;
&lt;p&gt;途中、証明書要求ファイルを作成する際に入力を求められるが、FQDN のみ適切な値
を入力する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;conf&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;genrsa&lt;/span&gt; &lt;span class="mi"&gt;2048&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt;  &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;csr&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;openssl&lt;/span&gt; &lt;span class="n"&gt;x509&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;days&lt;/span&gt; &lt;span class="mi"&gt;3650&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;req&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;signkey&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="k"&gt;key&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;csr&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cert&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pem&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;nginx Upstart の設定&lt;/p&gt;
&lt;p&gt;Upstart に登録して自動起動および起動停止を楽に出来る様にする。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/etc/init/nginx.conf&lt;/code&gt; ファイルを作成する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; # &lt;span class="nv"&gt;nginx&lt;/span&gt;

 &lt;span class="nv"&gt;description&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;nginx http daemon&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
 &lt;span class="nv"&gt;author&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;George Shammas &amp;lt;georgyo@gmail.com&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

 &lt;span class="nv"&gt;start&lt;/span&gt; &lt;span class="nv"&gt;on&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;filesystem&lt;/span&gt; &lt;span class="nv"&gt;and&lt;/span&gt; &lt;span class="nv"&gt;net&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;device&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;up&lt;/span&gt; &lt;span class="nv"&gt;IFACE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;lo&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;
 &lt;span class="nv"&gt;stop&lt;/span&gt; &lt;span class="nv"&gt;on&lt;/span&gt; &lt;span class="nv"&gt;runlevel&lt;/span&gt; [&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="mi"&gt;2345&lt;/span&gt;]

 &lt;span class="nv"&gt;env&lt;/span&gt; &lt;span class="nv"&gt;DAEMON&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;usr&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;local&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;sbin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;nginx&lt;/span&gt;
 &lt;span class="nv"&gt;env&lt;/span&gt; &lt;span class="nv"&gt;PID&lt;/span&gt;&lt;span class="o"&gt;=/&lt;/span&gt;&lt;span class="nv"&gt;var&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;run&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;nginx&lt;/span&gt;.&lt;span class="nv"&gt;pid&lt;/span&gt;

 &lt;span class="nv"&gt;expect&lt;/span&gt; &lt;span class="nv"&gt;fork&lt;/span&gt;
 &lt;span class="nv"&gt;respawn&lt;/span&gt;
 &lt;span class="nv"&gt;respawn&lt;/span&gt; &lt;span class="nv"&gt;limit&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;
 #&lt;span class="nv"&gt;oom&lt;/span&gt; &lt;span class="nv"&gt;never&lt;/span&gt;

 &lt;span class="nv"&gt;pre&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;start&lt;/span&gt; &lt;span class="nv"&gt;script&lt;/span&gt;
         &lt;span class="mh"&gt;$DAE&lt;/span&gt;&lt;span class="nv"&gt;MON&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;t&lt;/span&gt;
         &lt;span class="k"&gt;if&lt;/span&gt; [ $? &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;ne&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; ]
                 &lt;span class="k"&gt;then&lt;/span&gt; &lt;span class="k"&gt;exit&lt;/span&gt; $?
         &lt;span class="nv"&gt;fi&lt;/span&gt;
 &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="nv"&gt;script&lt;/span&gt;

 &lt;span class="k"&gt;exec&lt;/span&gt; &lt;span class="mh"&gt;$DAE&lt;/span&gt;&lt;span class="nv"&gt;MON&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Upstart の設定の再読み込み&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;initctl&lt;/span&gt; &lt;span class="n"&gt;reload&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;configuration&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Upstar Job list の確認&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;initctl&lt;/span&gt; &lt;span class="n"&gt;list&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;grep&lt;/span&gt; &lt;span class="n"&gt;nginx&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;nginx の起動&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt; &lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;initctl&lt;/span&gt; &lt;span class="k"&gt;start&lt;/span&gt; &lt;span class="n"&gt;nginx&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id="nginx-19x"&gt;備考: nginx 1.9.X のパッケージからのインストール&lt;/h4&gt;
&lt;p&gt;パッケージ探すのが面倒で、「いいや、ソースからビルドしてインストールしよう。」
と思い上記の通りとなったのだが、調べている内にパッケージインストールの方法も
見つかったし、後の設定も楽だなと再認識。&lt;/p&gt;
&lt;p&gt;調べてる内にヒットしたサイトを元に試したパッケージインストールの方法も簡単に記載する。
なお、お試しはソースインストールした場合で実施している。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;公式リポジトリを追加&lt;/p&gt;
&lt;p&gt;nginxサイトが配布するPGPキーを追加する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ curl http://nginx.org/keys/nginx_signing.key &lt;span class="p"&gt;|&lt;/span&gt; sudo apt-key add -
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;リポジトリを一覧に追加する。この時、stable ではなく、 mainline を追加しま
す。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo sh -c &lt;span class="s2"&gt;&amp;quot;echo &amp;#39;deb http://nginx.org/packages/mainline/ubuntu/ trusty nginx&amp;#39; &amp;gt;&amp;gt; /etc/apt/sources.list&amp;quot;&lt;/span&gt;
$ sudo sh -c &lt;span class="s2"&gt;&amp;quot;echo &amp;#39;deb-src http://nginx.org/packages/mainline/ubuntu/ trusty nginx&amp;#39; &amp;gt;&amp;gt; /etc/apt/sources.list&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;インストール&lt;/p&gt;
&lt;p&gt;公式リポジトリの最新のパッケージをインストールします。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get update
$ sudo apt-get install nginx
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;インストール後の設定ファイルと自己署名証明書の設定は上記の通り。&lt;/p&gt;
&lt;p&gt;今回パッケージインストールした後の &lt;code&gt;nginx -V&lt;/code&gt; コマンドの結果は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ nginx -V
nginx version: nginx/1.9.8
built by gcc &lt;span class="m"&gt;4&lt;/span&gt;.8.4 &lt;span class="o"&gt;(&lt;/span&gt;Ubuntu &lt;span class="m"&gt;4&lt;/span&gt;.8.4-2ubuntu1~14.04&lt;span class="o"&gt;)&lt;/span&gt;
built with OpenSSL &lt;span class="m"&gt;1&lt;/span&gt;.0.1f &lt;span class="m"&gt;6&lt;/span&gt; Jan &lt;span class="m"&gt;2014&lt;/span&gt;
TLS SNI support enabled
configure arguments: --prefix&lt;span class="o"&gt;=&lt;/span&gt;/etc/nginx --sbin-path&lt;span class="o"&gt;=&lt;/span&gt;/usr/sbin/nginx
--conf-path&lt;span class="o"&gt;=&lt;/span&gt;/etc/nginx/nginx.conf --error-log-path&lt;span class="o"&gt;=&lt;/span&gt;/var/log/nginx/error.log
--http-log-path&lt;span class="o"&gt;=&lt;/span&gt;/var/log/nginx/access.log --pid-path&lt;span class="o"&gt;=&lt;/span&gt;/var/run/nginx.pid
--lock-path&lt;span class="o"&gt;=&lt;/span&gt;/var/run/nginx.lock
--http-client-body-temp-path&lt;span class="o"&gt;=&lt;/span&gt;/var/cache/nginx/client_temp
--http-proxy-temp-path&lt;span class="o"&gt;=&lt;/span&gt;/var/cache/nginx/proxy_temp
--http-fastcgi-temp-path&lt;span class="o"&gt;=&lt;/span&gt;/var/cache/nginx/fastcgi_temp
--http-uwsgi-temp-path&lt;span class="o"&gt;=&lt;/span&gt;/var/cache/nginx/uwsgi_temp
--http-scgi-temp-path&lt;span class="o"&gt;=&lt;/span&gt;/var/cache/nginx/scgi_temp --user&lt;span class="o"&gt;=&lt;/span&gt;nginx --group&lt;span class="o"&gt;=&lt;/span&gt;nginx
--with-http_ssl_module --with-http_realip_module --with-http_addition_module
--with-http_sub_module --with-http_dav_module --with-http_flv_module
--with-http_mp4_module --with-http_gunzip_module
--with-http_gzip_static_module --with-http_random_index_module
--with-http_secure_link_module --with-http_stub_status_module
--with-http_auth_request_module --with-threads --with-stream
--with-stream_ssl_module --with-http_slice_module --with-mail
--with-mail_ssl_module --with-file-aio --with-http_v2_module
--with-cc-opt&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat&lt;/span&gt;
&lt;span class="s1"&gt;-Werror=format-security -Wp,-D_FORTIFY_SOURCE=2&amp;#39;&lt;/span&gt;
--with-ld-opt&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;-Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,--as-needed&amp;#39;&lt;/span&gt;
--with-ipv6
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="_7"&gt;ベンチマークの取得&lt;/h2&gt;
&lt;p&gt;nginx デフォルトの index.html (612bytes) を用いてベンチマークを取得する。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;リクエストコマンドの決定&lt;/p&gt;
&lt;p&gt;まず、HTTP/2 の場合に全て成功する場合のリクエストを生成する
コマンドを決定する。&lt;/p&gt;
&lt;p&gt;今回構築した環境で全て成功するリクエストと失敗が発生するリクエストの境界値は
以下コマンドにて生成したリクエストだった。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ h2load -n &lt;span class="m"&gt;100000&lt;/span&gt; -c &lt;span class="m"&gt;50&lt;/span&gt; -m &lt;span class="m"&gt;50&lt;/span&gt; https://nginx/
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;-n: 総リクエスト数&lt;/li&gt;
&lt;li&gt;-c: クライアント数&lt;/li&gt;
&lt;li&gt;-m: クライアント当たりの、最大ストリーム並列数&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;なお、総リクエスト数は変更せず、クライアント数＝最大ストリーム並列数として境
界値を探った。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/2 でのベンチマーク&lt;/p&gt;
&lt;p&gt;HTTP/2 の場合に取得した値は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA384&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;h2&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;60&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;70&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;80&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;.&lt;span class="mi"&gt;69&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;27122&lt;/span&gt;.&lt;span class="mi"&gt;09&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;19&lt;/span&gt;.&lt;span class="mi"&gt;76&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;76402450&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;13400000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;23&lt;/span&gt;.&lt;span class="mi"&gt;86&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;61200000&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:     &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;283&lt;/span&gt;.&lt;span class="mi"&gt;45&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;75&lt;/span&gt;.&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;32&lt;/span&gt;.&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;77&lt;/span&gt;.&lt;span class="mi"&gt;78&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:   &lt;span class="mi"&gt;173&lt;/span&gt;.&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;75&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;496&lt;/span&gt;.&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;487&lt;/span&gt;.&lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;80&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:   &lt;span class="mi"&gt;212&lt;/span&gt;.&lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;       &lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;83&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;    &lt;span class="mi"&gt;592&lt;/span&gt;.&lt;span class="mi"&gt;09&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;482&lt;/span&gt;.&lt;span class="mi"&gt;91&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;80&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :     &lt;span class="mi"&gt;542&lt;/span&gt;.&lt;span class="mi"&gt;83&lt;/span&gt;      &lt;span class="mi"&gt;616&lt;/span&gt;.&lt;span class="mi"&gt;43&lt;/span&gt;      &lt;span class="mi"&gt;567&lt;/span&gt;.&lt;span class="mi"&gt;14&lt;/span&gt;       &lt;span class="mi"&gt;14&lt;/span&gt;.&lt;span class="mi"&gt;13&lt;/span&gt;    &lt;span class="mi"&gt;72&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP/1.1 でのベンチマーク&lt;/p&gt;
&lt;p&gt;HTTP/1.1 の場合に取得した値は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nv"&gt;h2load&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;c&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;m&lt;/span&gt; &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;https&lt;/span&gt;:&lt;span class="o"&gt;//&lt;/span&gt;&lt;span class="nv"&gt;nginx&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;span class="nv"&gt;starting&lt;/span&gt; &lt;span class="nv"&gt;benchmark&lt;/span&gt;...
&lt;span class="nv"&gt;spawning&lt;/span&gt; &lt;span class="nv"&gt;thread&lt;/span&gt; &lt;span class="sc"&gt;#0&lt;/span&gt;: &lt;span class="mi"&gt;50&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;. &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt; &lt;span class="nv"&gt;requests&lt;/span&gt;
&lt;span class="nv"&gt;TLS&lt;/span&gt; &lt;span class="nv"&gt;Protocol&lt;/span&gt;: &lt;span class="nv"&gt;TLSv1&lt;/span&gt;.&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nv"&gt;Cipher&lt;/span&gt;: &lt;span class="nv"&gt;ECDHE&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;RSA&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;AES256&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;GCM&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;SHA384&lt;/span&gt;
&lt;span class="nv"&gt;Server&lt;/span&gt; &lt;span class="nv"&gt;Temp&lt;/span&gt; &lt;span class="nv"&gt;Key&lt;/span&gt;: &lt;span class="nv"&gt;ECDH&lt;/span&gt; &lt;span class="nv"&gt;P&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="nv"&gt;bits&lt;/span&gt;
&lt;span class="nv"&gt;Application&lt;/span&gt; &lt;span class="nv"&gt;protocol&lt;/span&gt;: &lt;span class="nv"&gt;http&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;.&lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;
&lt;span class="nv"&gt;progress&lt;/span&gt;: &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;

&lt;span class="nv"&gt;finished&lt;/span&gt; &lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;.&lt;span class="mi"&gt;08&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;23729&lt;/span&gt;.&lt;span class="mi"&gt;25&lt;/span&gt; &lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;, &lt;span class="mi"&gt;19&lt;/span&gt;.&lt;span class="mi"&gt;04&lt;/span&gt;&lt;span class="nv"&gt;MB&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt;
&lt;span class="nv"&gt;requests&lt;/span&gt;: &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;73062&lt;/span&gt; &lt;span class="nv"&gt;started&lt;/span&gt;, &lt;span class="mi"&gt;100000&lt;/span&gt; &lt;span class="nv"&gt;done&lt;/span&gt;, &lt;span class="mi"&gt;49365&lt;/span&gt; &lt;span class="nv"&gt;succeeded&lt;/span&gt;, &lt;span class="mi"&gt;50635&lt;/span&gt; &lt;span class="nv"&gt;failed&lt;/span&gt;, &lt;span class="mi"&gt;50635&lt;/span&gt; &lt;span class="nv"&gt;errored&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="nb"&gt;timeout&lt;/span&gt;
&lt;span class="nv"&gt;status&lt;/span&gt; &lt;span class="nv"&gt;codes&lt;/span&gt;: &lt;span class="mi"&gt;49365&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;, &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="nv"&gt;xx&lt;/span&gt;
&lt;span class="nv"&gt;traffic&lt;/span&gt;: &lt;span class="mi"&gt;41526288&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;total&lt;/span&gt;, &lt;span class="mi"&gt;9179625&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;headers&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;space&lt;/span&gt; &lt;span class="nv"&gt;savings&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;, &lt;span class="mi"&gt;30211380&lt;/span&gt; &lt;span class="nv"&gt;bytes&lt;/span&gt; &lt;span class="nv"&gt;data&lt;/span&gt;
                     &lt;span class="nv"&gt;min&lt;/span&gt;         &lt;span class="nv"&gt;max&lt;/span&gt;         &lt;span class="nv"&gt;mean&lt;/span&gt;         &lt;span class="nv"&gt;sd&lt;/span&gt;        &lt;span class="o"&gt;+/-&lt;/span&gt; &lt;span class="nv"&gt;sd&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;request&lt;/span&gt;:      &lt;span class="mi"&gt;916&lt;/span&gt;&lt;span class="nv"&gt;us&lt;/span&gt;    &lt;span class="mi"&gt;253&lt;/span&gt;.&lt;span class="mi"&gt;71&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;17&lt;/span&gt;.&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;30&lt;/span&gt;.&lt;span class="mi"&gt;66&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;92&lt;/span&gt;.&lt;span class="mi"&gt;47&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="k"&gt;connect&lt;/span&gt;:    &lt;span class="mi"&gt;22&lt;/span&gt;.&lt;span class="mi"&gt;45&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;165&lt;/span&gt;.&lt;span class="mi"&gt;97&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;74&lt;/span&gt;.&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;43&lt;/span&gt;.&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;74&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;time&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="nv"&gt;st&lt;/span&gt; &lt;span class="nv"&gt;byte&lt;/span&gt;:    &lt;span class="mi"&gt;23&lt;/span&gt;.&lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;174&lt;/span&gt;.&lt;span class="mi"&gt;92&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;78&lt;/span&gt;.&lt;span class="mi"&gt;54&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;     &lt;span class="mi"&gt;45&lt;/span&gt;.&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="nv"&gt;ms&lt;/span&gt;    &lt;span class="mi"&gt;74&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;span class="nv"&gt;req&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="nv"&gt;s&lt;/span&gt; &lt;span class="ss"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;client&lt;/span&gt;&lt;span class="ss"&gt;)&lt;/span&gt;  :     &lt;span class="mi"&gt;291&lt;/span&gt;.&lt;span class="mi"&gt;79&lt;/span&gt;      &lt;span class="mi"&gt;667&lt;/span&gt;.&lt;span class="mi"&gt;97&lt;/span&gt;      &lt;span class="mi"&gt;545&lt;/span&gt;.&lt;span class="mi"&gt;61&lt;/span&gt;      &lt;span class="mi"&gt;122&lt;/span&gt;.&lt;span class="mi"&gt;03&lt;/span&gt;    &lt;span class="mi"&gt;80&lt;/span&gt;.&lt;span class="mi"&gt;00&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="_8"&gt;ご参考&lt;/h3&gt;
&lt;p&gt;当初、HTTP/1.1 で全て処理できるリクエスト数を探り、同じリクエストを発行して
HTTP/2の場合と比較するつもりだったが、HTTP/1.1 の場合は
クライアント数＝最大ストリーム数＝１となった為、このリクエストでは負荷を与え
られてないと判断したので、この観点からの検証はやめることにした。&lt;/p&gt;
&lt;p&gt;なお、その時のコマンドの実行結果は以下の通り。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;$&lt;/span&gt; h2load -n &lt;span class="m"&gt;100000&lt;/span&gt; -c &lt;span class="m"&gt;1&lt;/span&gt; -m &lt;span class="m"&gt;1&lt;/span&gt; https://nginx/
&lt;span class="go"&gt;starting benchmark...&lt;/span&gt;
&lt;span class="go"&gt;spawning thread #0: 1 total client(s). 100000 total requests&lt;/span&gt;
&lt;span class="go"&gt;TLS Protocol: TLSv1.2&lt;/span&gt;
&lt;span class="go"&gt;Cipher: ECDHE-RSA-AES256-GCM-SHA384&lt;/span&gt;
&lt;span class="go"&gt;Server Temp Key: ECDH P-256 256 bits&lt;/span&gt;
&lt;span class="go"&gt;Application protocol: http/1.1&lt;/span&gt;
&lt;span class="go"&gt;progress: 10% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 20% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 30% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 40% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 50% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 60% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 70% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 80% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 90% done&lt;/span&gt;
&lt;span class="go"&gt;progress: 100% done&lt;/span&gt;

&lt;span class="go"&gt;finished in 103.20s, 968.98 req/s, 795.35KB/s&lt;/span&gt;
&lt;span class="go"&gt;requests: 100000 total, 100000 started, 100000 done, 100000 succeeded, 0 failed, 0 errored, 0 timeout&lt;/span&gt;
&lt;span class="go"&gt;status codes: 100000 2xx, 0 3xx, 0 4xx, 0 5xx&lt;/span&gt;
&lt;span class="go"&gt;traffic: 84051000 bytes total, 18595000 bytes headers (space savings 0.00%), 61200000 bytes data&lt;/span&gt;
&lt;span class="go"&gt;                      min         max         mean        sd        +/- sd&lt;/span&gt;
&lt;span class="go"&gt;time for request:      778us      8.32ms      1.01ms       121us    97.33%&lt;/span&gt;
&lt;span class="go"&gt;time for connect:     2.28ms      2.28ms      2.28ms         0us   100.00%&lt;/span&gt;
&lt;span class="go"&gt;time to 1st byte:     3.44ms      3.44ms      3.44ms         0us   100.00%&lt;/span&gt;
&lt;span class="go"&gt;req/s (client)  :     968.98      968.98      968.98        0.00   100.00%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h1 id="_9"&gt;考察&lt;/h1&gt;
&lt;p&gt;HTTP/1.1 および HTTP/2 はそれぞれ以下の表の通り。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;HTTP Version&lt;/th&gt;
&lt;th&gt;Time (sec)&lt;/th&gt;
&lt;th&gt;Requests/sec&lt;/th&gt;
&lt;th&gt;succeeded/Requests&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;1.1&lt;/td&gt;
&lt;td&gt;2.08&lt;/td&gt;
&lt;td&gt;23729.25&lt;/td&gt;
&lt;td&gt;0.49365&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;2&lt;/td&gt;
&lt;td&gt;3.69&lt;/td&gt;
&lt;td&gt;27122.09&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;このお試しにより得られた結果としては以下のことが言えると思う。多少荒っぽい感も否
めないが……。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;表より、HTTP/2 が耐えられるリクエスト数は、HTTP/1.1 では半分が耐えられない&lt;/li&gt;
&lt;li&gt;ご参考に記載しているが、HTTP/1.1 では、全てのリクエストが成功するのは、
  クライアント数＝最大ストリーム並列数＝1 の場合のみ&lt;/li&gt;
&lt;li&gt;HTTP/2 でも、クライアント数＝最大ストリーム並列数＝70でも全て成功する場合も
  あったが、何度繰り返しても成功するのは、50の場合&lt;/li&gt;
&lt;li&gt;よって全てのリクエストを処理する能力を単純比較すると、HTTP/2 は、HTTP/1.1 の50倍&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_10"&gt;参考資料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.nginx.com/blog/nginx-1-9-5/"&gt;NGINX Open Source 1.9.5 Released with HTTP/2 Support&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/tatsuhiro-t/nghttp2"&gt;tatsuhiro-t/nghttp2&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://qiita.com/0xfffffff7/items/c8f195c9f1782ca64e92"&gt;nghttp2を使用する #1&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://d.hatena.ne.jp/ASnoKaze/20150923/1442937121"&gt;Nginx 1.9.5 でHTTP2を試そう！ - あすのかぜ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.nginx.com/resources/wiki/start/topics/examples/ubuntuupstart/"&gt;Ubuntu Upstart | NGINX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://sudosan.net/nginx-http2-enable/"&gt;nginxでhttp2を有効にする&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://qiita.com/0xfffffff7/items/dc41cf560e0e0ea4bdbc"&gt;[HTTP2] WindowsServerでHTTP2のベンチマーク&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/tatsuhiro-t/nghttp2/wiki/ServerBenchmarkRoundH210"&gt;ServerBenchmarkRoundH210&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="http2"></category><category term="Ubuntu"></category><category term="nginx"></category><category term="Systemworks"></category><category term="h2load"></category><category term="Hyper-V 2012 R2"></category><category term="benchmark"></category></entry><entry><title>sphinx-autobuild によるドキュメントのリビルド</title><link href="https://lupinthe14th.github.io/sphinx-autobuild.html" rel="alternate"></link><published>2015-12-04T18:00:00+09:00</published><updated>2015-12-04T18:00:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2015-12-04:/sphinx-autobuild.html</id><summary type="html">&lt;p&gt;Sphinx を用いたドキュメント作成でのローカル確認に便利なsphinx-autobuildについて&lt;/p&gt;</summary><content type="html">&lt;h1 id="_1"&gt;はじめに&lt;/h1&gt;
&lt;p&gt;日々の作業記録として自分向け日報を Sphinx を用いて作成している。この時、ローカル
環境で確認する手段として、&lt;code&gt;watch&lt;/code&gt; コマンドを用いて &lt;code&gt;make html&lt;/code&gt; を実行させるよう
にし、生成されたhtml ファイルを直接ブラウザで開いて確認していた。&lt;/p&gt;
&lt;p&gt;そんな中、ふと技術系ブログをみていたら、&lt;code&gt;sphinx-autobuild&lt;/code&gt; なるツールが存在する
ことを知りものは試しに導入してみた。&lt;/p&gt;
&lt;h1 id="_2"&gt;目的&lt;/h1&gt;
&lt;p&gt;確認したい時に最新のドキュメントが確認出来る。&lt;/p&gt;
&lt;p&gt;この目的を満たすだけなら、&lt;code&gt;watch make html&lt;/code&gt; でも十分なのですが、なんとなくド
キュメント更新していないのに、コマンドが実行されるのがエコじゃないと思っていたの
もあります。&lt;/p&gt;
&lt;h1 id="_3"&gt;手順&lt;/h1&gt;
&lt;h2 id="_4"&gt;前提条件&lt;/h2&gt;
&lt;p&gt;この手順は、Mac OS X Yosemite の場合についてです。
なお、Python の Virtualenvwrapper で、Sphinx の専用環境を作成しています。&lt;/p&gt;
&lt;h2 id="sphinx-autobuild"&gt;sphinx-autobuild のインストール&lt;/h2&gt;
&lt;p&gt;以下コマンドを実行します。なお、Python の Virtualenvwrapper で、Sphinx の専用環
境を作成しています。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;%&lt;/span&gt; workon report
&lt;span class="gp"&gt;%&lt;/span&gt; pip install sphinx-autobuild
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="sphinx-autobuild_1"&gt;sphinx-autobuild の使い方&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="go"&gt;sphinx-autobuild &amp;lt;ソースディレクトリ&amp;gt; &amp;lt;ビルド成果物出力ディレクトリ&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ツールの公式ドキュメントには、Makefile に、コマンドを追加する例もあるようです。&lt;/p&gt;
&lt;h1 id="_5"&gt;所感&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;watch make html&lt;/code&gt; で、ファイルの出力先をブラウザで表示しているのと、ローカルhttp
サーバーを起動したままなのはどちらがエコなのかは、考えないことにしよう。&lt;/p&gt;
&lt;h1 id="_6"&gt;参考資料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://qiita.com/mikanbako/items/28a3fc5d1da42939f941"&gt;sphinx-autobuildで再ビルド、ブラウザの再リロードの手間を省いてSphinx文書をサクサク作成&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.techscore.com/blog/2015/04/01/sphinx-jenkins-で始めるドキュメントの継続的インテグレー/"&gt;Sphinx + Jenkins で始めるドキュメントの継続的インテグレーション&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Sphinx"></category><category term="Mac"></category></entry><entry><title>Github SSH 接続手順 ~ 二段階認証対応 ~</title><link href="https://lupinthe14th.github.io/Github-SSHConnection.html" rel="alternate"></link><published>2015-11-20T15:00:00+09:00</published><updated>2015-12-08T09:38:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2015-11-20:/Github-SSHConnection.html</id><summary type="html">&lt;p&gt;Github を二段階認証にするとSSH 接続でしか Push 出来ないのでその方法をまとめる&lt;/p&gt;</summary><content type="html">&lt;p&gt;Github を二段階認証にすると SSH 接続でしか Push 出来なくなる。
そこで、 SSH 接続する為の方法をまとめる。&lt;/p&gt;
&lt;h1 id="_1"&gt;目的&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;Github に &lt;code&gt;git push&lt;/code&gt; 可能になること&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_2"&gt;手順&lt;/h1&gt;
&lt;h2 id="_3"&gt;前提条件&lt;/h2&gt;
&lt;p&gt;この手順は、Mac OS X Yosemite の場合についてです。&lt;/p&gt;
&lt;h2 id="ssh"&gt;SSH 認証鍵の作成&lt;/h2&gt;
&lt;p&gt;作成する鍵の種類と鍵長は以下表の通り。鍵の種類は、DSAのセキュリティレベルのおよ
そ2倍であると考えられる ECDSA（楕円曲線DSA）を用いる。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;鍵の種類&lt;/th&gt;
&lt;th&gt;鍵長&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;ECDSA鍵&lt;/td&gt;
&lt;td&gt;521bit&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="openssh"&gt;OpenSSH のアップデートおよび設定&lt;/h3&gt;
&lt;p&gt;Mac OS X Yosemite のデフォルトのOpenSSH の &lt;code&gt;ssh-keygen&lt;/code&gt; および &lt;code&gt;ssh-agent&lt;/code&gt; では
ECDSA はサポートされていないので、以下の手順にてアップデートを行い、設定を行う。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;%&lt;/span&gt; brew tap homebrew/dupes
&lt;span class="gp"&gt;%&lt;/span&gt; brew install openssh --with-brewed-openssl --with-keychain-support
&lt;span class="gp"&gt;%&lt;/span&gt; launchctl stop org.openbsd.ssh-agent
&lt;span class="gp"&gt;%&lt;/span&gt; launchctl unload -w /System/Library/LaunchAgents/org.openbsd.ssh-agent.plist
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;sudo vi /System/Library/LaunchAgents/org.openbsd.ssh-agent.plist&lt;/code&gt;
で、&lt;code&gt;/usr/bin/ssh-agent&lt;/code&gt; を &lt;code&gt;/usr/local/bin/ssh-agent&lt;/code&gt; に置換する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;%&lt;/span&gt; launchctl load -w -S Aqua /System/Library/LaunchAgents/org.openbsd.ssh-agent.plist
&lt;span class="gp"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;SSH_AUTH_SOCK&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;launchctl getenv SSH_AUTH_SOCK&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;.zshrc&lt;/code&gt; を編集し、以下を追加する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;export PATH&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="sr"&gt;/usr/&lt;/span&gt;local&lt;span class="sr"&gt;/bin/&lt;/span&gt;:${PATH}
eval $&lt;span class="p"&gt;(&lt;/span&gt;ssh&lt;span class="p"&gt;-&lt;/span&gt;agent&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;&amp;gt;&lt;/span&gt; &lt;span class="sr"&gt;/dev/&lt;/span&gt;null
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="ssh_1"&gt;SSH 認証の公開鍵と秘密鍵の作成&lt;/h2&gt;
&lt;p&gt;以下コマンドにて、公開鍵: &lt;code&gt;id_ecdsa.pub&lt;/code&gt; と秘密鍵: &lt;code&gt;id_ecdsa&lt;/code&gt; を作成する。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt; ~/.ssh
&lt;span class="gp"&gt;%&lt;/span&gt; ssh-keygen -t ecdsa -b &lt;span class="m"&gt;521&lt;/span&gt; -C test@example.com
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="ssh-ssh"&gt;SSH クライアント側へのSSH認証鍵の設定&lt;/h2&gt;
&lt;p&gt;SSH 接続を簡単にする為、 &lt;code&gt;~/.ssh/config&lt;/code&gt; の設定を行います。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Host github
  HostName github.&lt;span class="k"&gt;com&lt;/span&gt;
  IdentityFile &lt;span class="p"&gt;~&lt;/span&gt;&lt;span class="sr"&gt;/.ssh/&lt;/span&gt;id_ecdsa
  &lt;span class="nb"&gt;User&lt;/span&gt; git
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="github-ssh"&gt;Github へのSSH認証鍵の登録&lt;/h2&gt;
&lt;p&gt;SSH 公開鍵を登録します。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;GitHubにブラウザでアクセス&lt;/li&gt;
&lt;li&gt;左側メニューのSSH Keys -&amp;gt; Add key を選択&lt;/li&gt;
&lt;li&gt;Title: に任意文字列を入力&lt;/li&gt;
&lt;li&gt;Key: に &lt;code&gt;pbcopy &amp;lt; ~/.ssh/id_ecdsa.pub&lt;/code&gt; を実行後のクリップボードを貼り付け&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id="github"&gt;Github への接続確認&lt;/h2&gt;
&lt;p&gt;接続に成功すると以下の様に表示される。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;%&lt;/span&gt; ssh -T github
&lt;span class="go"&gt;Hi lupinthe14th! You&amp;#39;ve successfully authenticated, but GitHub does not provide&lt;/span&gt;
&lt;span class="go"&gt;shell access.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2 id="_4"&gt;ローカルリポジトリの設定を変更&lt;/h2&gt;
&lt;p&gt;リポジトリの設定ファイルを開き、URLの項目をgit@...からはじまるSSH接続方式に変更
する。&lt;/p&gt;
&lt;h1 id="_5"&gt;参考資料&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://help.github.com"&gt;GitHub Help - GitHub Enterprise  Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.dctrwatson.com/2013/07/how-to-update-openssh-on-mac-os-x/"&gt;How to Update OpenSSH on Mac OS X&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://d.hatena.ne.jp/hnw/20140705"&gt;GitHubユーザーのSSH鍵6万個を調べてみた&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://qiita.com/katsukii/items/9fd5bbe822904d7cdd0a"&gt;GitHubにSSH接続できるようにする方法&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://mochtu.de/2015/01/07/updating-openssh-on-mac-os-x-10-10-yosemite/"&gt;Updating OpenSSH on Mac OS X 10.10 Yosemite&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Github"></category><category term="SSH"></category><category term="Mac"></category></entry><entry><title>blog 始めました</title><link href="https://lupinthe14th.github.io/blog-start.html" rel="alternate"></link><published>2015-11-18T01:00:00+09:00</published><updated>2015-11-19T18:00:00+09:00</updated><author><name>Hideo Suzuki</name></author><id>tag:lupinthe14th.github.io,2015-11-18:/blog-start.html</id><summary type="html">&lt;p&gt;技術系のネタをつらつらと blog 公開する事を始めました。&lt;/p&gt;</summary><content type="html">&lt;p&gt;技術系のネタをつらつらと blog で公開する事を始めました。&lt;/p&gt;
&lt;h1 id="_1"&gt;目的&lt;/h1&gt;
&lt;p&gt;目的と期待する効果は以下。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;技術情報を開示することによる自己研鑽&lt;/li&gt;
&lt;li&gt;技術情報の体系的なログ化&lt;/li&gt;
&lt;li&gt;アフェリエイトで小銭稼ぎ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;アフェリエイトで小遣い稼ぎってのがちょっと生々しいですが、技術ネタを作成する為の
ハードウェアの購入資金と、後々ドメインも取得して独自ドメインでこのブログを運用し
ていきたいのでその資金に当てられればと思います。&lt;/p&gt;
&lt;p&gt;世の中そんなに甘くないと思うので上手くいくとはおもいませんが、「ま、やってみっ
か。」な軽いノリでぼちぼち更新したいと考えています。&lt;/p&gt;
&lt;h1 id="_2"&gt;自己紹介&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;初老を迎えたサーバー系のインフラエンジニア&lt;/li&gt;
&lt;li&gt;Python が好きだけど、業務でプロダクトの開発経験がないのでプログラミングに自信
  はさっぱり&lt;/li&gt;
&lt;li&gt;IoT に興味あり。でも電子工作とかやった事なし&lt;/li&gt;
&lt;li&gt;IoT の興味から Erlang を覚えてみようと思っている今日この頃&lt;/li&gt;
&lt;li&gt;趣味は走ったり、登ったり&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id="_3"&gt;本ブログについて&lt;/h1&gt;
&lt;p&gt;Github Page を用いて公開しています。&lt;/p&gt;
&lt;p&gt;記事の作成には、Ruby製の静的サイトジェネレーター &lt;a href="http://jekyllrb.com"&gt;Jekyll&lt;/a&gt;
が有名ですが、Python が好きなのでPython 製がないか検索した所、
&lt;a href="http://docs.getpelican.com"&gt;Pelican&lt;/a&gt; ヒットし、慣れている「reStructuredText」
「Markdown」 が使えるという事で、これを用います。&lt;/p&gt;
&lt;h1 id="github-page"&gt;Github Page を用いる経緯&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;無料である&lt;/li&gt;
&lt;li&gt;Github アカウントを持っていたが活用していなかった&lt;/li&gt;
&lt;li&gt;エンジニアらしい優越感が持てる&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;上記が経緯です。 Tumblr でミニブログ使ってたのでサイト追加しようと思いましたが
アフェリエイトには向かないとの情報が検索した際に目立っていたのでやめました。&lt;/p&gt;
&lt;h1 id="_4"&gt;参考資料&lt;/h1&gt;
&lt;p&gt;情報公開に感謝致します。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://blog.sotm.jp/2014/01/04/Pelican-Markdown-GithubPages-install-guide/"&gt;Pelican + Markdown + GitHub Pagesで管理するブログの作り方&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="pelican"></category><category term="python"></category><category term="Github Page"></category><category term="blog"></category><category term="oss"></category></entry></feed>